<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Helen</title>
  <subtitle>热爱生活</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://kuanglijun312.github.io/"/>
  <updated>2016-09-02T06:38:00.866Z</updated>
  <id>https://kuanglijun312.github.io/</id>
  
  <author>
    <name>Lijun Kuang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>js 处理 excel</title>
    <link href="https://kuanglijun312.github.io/2016/09/02/js-excel/"/>
    <id>https://kuanglijun312.github.io/2016/09/02/js-excel/</id>
    <published>2016-09-02T06:09:53.000Z</published>
    <updated>2016-09-02T06:38:00.866Z</updated>
    
    <content type="html"><![CDATA[<h3 id="js库"><a href="#js库" class="headerlink" title="js库"></a>js库</h3><p>很多时候需要处理excel,比如用php去读取使用phpexcel,很占内存，也慢，读取大的文件，就需要设置:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@set_time_limit(<span class="number">0</span>);</div><div class="line">@ini_set(<span class="string">'memory_limit'</span>, <span class="string">'1024M'</span>);</div></pre></td></tr></table></figure></p>
<p>有时候，使用js脚本更轻松，这就是nodejs很大的贡献；</p>
<p>在这里推荐使用:<a href="https://github.com/SheetJS/js-xlsx" target="_blank" rel="external">https://github.com/SheetJS/js-xlsx</a>;<br>具体使用可以参考：<a href="https://scarletsky.github.io/2016/01/30/nodejs-process-excel/" target="_blank" rel="external">在 Node.js 中利用 js-xlsx 处理 Excel 文件</a></p>
<h3 id="解析excel"><a href="#解析excel" class="headerlink" title="解析excel;"></a>解析excel;</h3><p>代码说话吧，下面代码主要是生成插入的sql文件；<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> XLSX = <span class="built_in">require</span>(<span class="string">'xlsx'</span>);</div><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> workbook = XLSX.readFile(<span class="string">'t.xlsx'</span>, &#123;&#125;);</div><div class="line"><span class="built_in">console</span>.log(workbook.SheetNames)</div><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line"><span class="keyword">var</span> sqlArr = [];</div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> index = <span class="number">0</span>;</div><div class="line">workbook.SheetNames.forEach((sheet,i) =&gt; &#123;</div><div class="line">    i = (i+<span class="number">1</span>)%<span class="number">3</span></div><div class="line">    <span class="keyword">var</span> data = XLSX.utils.make_json(workbook.Sheets[sheet],&#123;header:<span class="number">1</span>&#125;);</div><div class="line">    <span class="built_in">console</span>.log(workbook.Sheets[sheet][<span class="string">'!ref'</span>]);</div><div class="line">    <span class="keyword">if</span>(i == <span class="number">1</span>) &#123;</div><div class="line">        <span class="built_in">console</span>.log(workbook.Sheets[sheet])</div><div class="line">        <span class="built_in">console</span>.log(data,data.length);</div><div class="line">    &#125;</div><div class="line">    data.forEach((d,j) =&gt; &#123;</div><div class="line">        <span class="keyword">var</span> v = d[<span class="number">0</span>].replace(<span class="regexp">/[\r\n]/g</span>,<span class="string">""</span>);</div><div class="line">        arr.push(<span class="string">'"'</span>+[v, i, <span class="string">'2016-09-01 12:50:00'</span>].join(<span class="string">'","'</span>)+<span class="string">'"'</span>);</div><div class="line">        <span class="keyword">if</span>(obj[v] || v==<span class="string">''</span>) &#123;</div><div class="line">            <span class="built_in">console</span>.log(v);</div><div class="line">        &#125;</div><div class="line">        obj[v] = <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>(arr.length &gt;= <span class="number">10000</span>) &#123;</div><div class="line">            sqlArr.push(<span class="string">'insert into mpc_chengyang_code (code,code_type,code_time_create) values ('</span>+arr.join(<span class="string">'),('</span>)+<span class="string">');'</span>)</div><div class="line">            arr.length = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">&#125;);</div><div class="line"></div><div class="line">sqlArr.push(<span class="string">'insert into mpc_chengyang_code (code,code_type,code_time_create) values ('</span>+arr.join(<span class="string">'),('</span>)+<span class="string">');'</span>)</div><div class="line"></div><div class="line">fs.writeFile(<span class="string">'code.sql'</span>, sqlArr.join(<span class="string">''</span>), <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line">    <span class="built_in">console</span>.log(err);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"Export Account Success!"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>注意： nodejs4点几版本，不支持import,也不能用let,有点无奈~~这里提醒下 make_json 的第二个参数，看源代码，可以不传，可以传1,或者’A’;<br>传1的话是数组形式:<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[ [ 'AAA', 'BBB' ],</div><div class="line">  [ 'AAA2', 'BBB2' ],</div><div class="line">  [ 'AAA3', 'BBB3' ],</div><div class="line">  [ , 'BBB4' ] ]</div></pre></td></tr></table></figure></p>
<p>传’A’的是json：且从第一行开始算:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[ &#123; A: 'AAA', B: 'BBB' &#125;,</div><div class="line">  &#123; A: 'AAA2', B: 'BBB2' &#125;,</div><div class="line">  &#123; A: 'AAA3', B: 'BBB3' &#125;,</div><div class="line">  &#123; B: 'BBB4' &#125; ]</div></pre></td></tr></table></figure></p>
<p>默认是从第二列开始算，且以第一列为key;</p>
<h3 id="写入excel"><a href="#写入excel" class="headerlink" title="写入excel"></a>写入excel</h3><p>看代码:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> XLSX = <span class="built_in">require</span>(<span class="string">'xlsx'</span>);</div><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">exportXlsxFile</span>(<span class="params">headers, data, sheetName, fileName</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> sheetName = sheetName || <span class="string">'mySheet'</span>;</div><div class="line">    <span class="keyword">var</span> fileName = fileName || <span class="string">'output.xlsx'</span>;</div><div class="line">    <span class="keyword">var</span> output = &#123;&#125;,headerKeys = [];</div><div class="line">    headers.forEach((d,i) =&gt; &#123;</div><div class="line">        <span class="keyword">var</span> pos = <span class="built_in">String</span>.fromCharCode(<span class="number">65</span>+i) + <span class="number">1</span>;</div><div class="line">        output[pos] = &#123;<span class="string">'v'</span>:d[<span class="number">1</span>]&#125;;</div><div class="line">        headerKeys.push(d[<span class="number">0</span>]);</div><div class="line">    &#125;);</div><div class="line">    data.forEach((d,i) =&gt; &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> d) &#123;</div><div class="line">            <span class="keyword">var</span> pos = headerKeys.indexOf(k);</div><div class="line">            <span class="keyword">if</span>(~pos) &#123;</div><div class="line">                pos = <span class="built_in">String</span>.fromCharCode(<span class="number">65</span>+pos) + (i+<span class="number">2</span>);</div><div class="line">                output[pos] = &#123;<span class="string">'v'</span>:d[k],<span class="string">'t'</span>:<span class="string">'s'</span>&#125;;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    output[<span class="string">'!ref'</span>] = <span class="string">'A1:'</span>+<span class="built_in">String</span>.fromCharCode(<span class="number">65</span>+headers.length)+(data.length+<span class="number">1</span>);</div><div class="line">    <span class="keyword">var</span> Sheets = &#123;&#125;;</div><div class="line">    Sheets[sheetName] = output;</div><div class="line">    <span class="keyword">var</span> wb = &#123;</div><div class="line">        SheetNames: [sheetName],</div><div class="line">        Sheets:Sheets</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    XLSX.writeFile(wb, fileName);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> headers = [[<span class="string">'id'</span>,<span class="string">'ID'</span>],[<span class="string">'name'</span>,<span class="string">'姓名'</span>], [<span class="string">'age'</span>,<span class="string">'年龄'</span>], [<span class="string">'country'</span>,<span class="string">'国家'</span>], [<span class="string">'remark'</span>,<span class="string">'备注'</span>]]</div><div class="line"><span class="keyword">var</span> data = [ &#123; id: <span class="string">'1'</span>,</div><div class="line">                name: <span class="string">'test1'</span>,</div><div class="line">                age: <span class="string">'30'</span>,</div><div class="line">                country: <span class="string">'China'</span>,</div><div class="line">                remark: <span class="string">'hello'</span> &#125;,</div><div class="line">              &#123; id: <span class="string">'2'</span>,</div><div class="line">                name: <span class="string">'test2'</span>,</div><div class="line">                age: <span class="string">'20'</span>,</div><div class="line">                country: <span class="string">'America'</span>,</div><div class="line">                remark: <span class="string">'world'</span> &#125;,</div><div class="line">              &#123; id: <span class="string">'3'</span>,</div><div class="line">                name: <span class="string">'test3'</span>,</div><div class="line">                age: <span class="string">'18'</span>,</div><div class="line">                country: <span class="string">'Unkonw'</span>,</div><div class="line">                remark: <span class="string">'???'</span> &#125; ];</div><div class="line"><span class="keyword">var</span> sheetName = <span class="string">'mySheet'</span>;</div><div class="line"><span class="keyword">var</span> fileName = <span class="string">''</span>;</div><div class="line"></div><div class="line">exportXlsxFile(headers, data, <span class="string">'哈哈哈哈'</span>, <span class="string">'我的excel.xlsx'</span>);</div></pre></td></tr></table></figure></p>
<p>注意点: 主要是要拼成workbook的json格式; 其中’!ref’，很重要，为写入多少!</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;js库&quot;&gt;&lt;a href=&quot;#js库&quot; class=&quot;headerlink&quot; title=&quot;js库&quot;&gt;&lt;/a&gt;js库&lt;/h3&gt;&lt;p&gt;很多时候需要处理excel,比如用php去读取使用phpexcel,很占内存，也慢，读取大的文件，就需要设置:&lt;br&gt;&lt;figure
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="javascipt" scheme="https://kuanglijun312.github.io/tags/javascipt/"/>
    
      <category term="excel" scheme="https://kuanglijun312.github.io/tags/excel/"/>
    
      <category term="xlsx" scheme="https://kuanglijun312.github.io/tags/xlsx/"/>
    
  </entry>
  
  <entry>
    <title>Hexo</title>
    <link href="https://kuanglijun312.github.io/2016/09/02/hello-world/"/>
    <id>https://kuanglijun312.github.io/2016/09/02/hello-world/</id>
    <published>2016-09-02T03:12:56.185Z</published>
    <updated>2016-09-02T03:12:56.185Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h1 id="迁移的问题-–-2015-04-05"><a href="#迁移的问题-–-2015-04-05" class="headerlink" title="迁移的问题 – 2015-04-05"></a>迁移的问题 – 2015-04-05</h1><p>全局安装hexo<br><figure class="highlight plain"><figcaption><span>install hexo -g ```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">本地文件夹安装hexo </div><div class="line">``` npm install hexo --no-optional</div></pre></td></tr></table></figure></p>
<p>如果出现以下问题，请加–no-optional;</p>
<p>出现以下问题：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; [<span class="built_in">Error</span>: Cannot find <span class="built_in">module</span> <span class="string">'./build/Release/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div><div class="line">&#123; [<span class="built_in">Error</span>: Cannot find <span class="built_in">module</span> <span class="string">'./build/default/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div><div class="line">&#123; [<span class="built_in">Error</span>: Cannot find <span class="built_in">module</span> <span class="string">'./build/Debug/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div></pre></td></tr></table></figure></p>
<p>另外需要本地<figure class="highlight plain"><figcaption><span>install```;</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">检查_config.xml; 其中的theme，检查themes文件夹下的对应的theme是否存在;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">``` bash</div><div class="line">$ hexo n</div><div class="line">$ hexo g</div><div class="line">$ hexo s</div><div class="line">$ hexo d</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;http://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;http://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;http://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h1 id=&quot;迁移的问题-–-2015-04-05&quot;&gt;&lt;a href=&quot;#迁移的问题-–-2015-04-05&quot; class=&quot;headerlink&quot; title=&quot;迁移的问题 – 2015-04-05&quot;&gt;&lt;/a&gt;迁移的问题 – 2015-04-05&lt;/h1&gt;&lt;p&gt;全局安装hexo&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;install hexo -g ```&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;本地文件夹安装hexo &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;``` npm install hexo --no-optional&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果出现以下问题，请加–no-optional;&lt;/p&gt;
&lt;p&gt;出现以下问题：&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123; [&lt;span class=&quot;built_in&quot;&gt;Error&lt;/span&gt;: Cannot find &lt;span class=&quot;built_in&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./build/Release/DTraceProviderBindings&#39;&lt;/span&gt;] code: &lt;span class=&quot;string&quot;&gt;&#39;MODULE_NOT_FOUND&#39;&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123; [&lt;span class=&quot;built_in&quot;&gt;Error&lt;/span&gt;: Cannot find &lt;span class=&quot;built_in&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./build/default/DTraceProviderBindings&#39;&lt;/span&gt;] code: &lt;span class=&quot;string&quot;&gt;&#39;MODULE_NOT_FOUND&#39;&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123; [&lt;span class=&quot;built_in&quot;&gt;Error&lt;/span&gt;: Cannot find &lt;span class=&quot;built_in&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./build/Debug/DTraceProviderBindings&#39;&lt;/span&gt;] code: &lt;span class=&quot;string&quot;&gt;&#39;MODULE_NOT_FOUND&#39;&lt;/span&gt; &amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;另外需要本地&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;install```;&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;检查_config.xml; 其中的theme，检查themes文件夹下的对应的theme是否存在;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;``` bash&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ hexo n&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ hexo g&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ hexo s&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ hexo d&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>localStorage的跨域处理</title>
    <link href="https://kuanglijun312.github.io/2016/06/21/localstorage_cross_domain/"/>
    <id>https://kuanglijun312.github.io/2016/06/21/localstorage_cross_domain/</id>
    <published>2016-06-21T08:50:19.000Z</published>
    <updated>2016-09-02T03:12:56.186Z</updated>
    
    <content type="html"><![CDATA[<h3 id="localStorage的跨域处理"><a href="#localStorage的跨域处理" class="headerlink" title="localStorage的跨域处理"></a>localStorage的跨域处理</h3><p>localStorage是不能跨域的，包括子域名;<br>由于现实中a.com和www.a.com其实都是同一个网站，如果用了localStorage则无法简单的公用数据，解决跨域，需要用到h5的message消息机制！</p>
<p>比如在a.com中添加www.a.com的iframe，并在页面中能获取iframe的window，这样就可以通信了!</p>
<p>相关一些代码:<br>代码中，用的store.js的存储，见<a href="https://github.com/marcuswestin/store.js/" target="_blank" rel="external">store.js</a><br>a.com网站<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Common = &#123;</div><div class="line">    addSyncWindow: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">let</span> otherHost = location.host == <span class="string">'www.a.com'</span> ? <span class="string">'http://a.com'</span> : <span class="string">'http://www.a.com'</span>;</div><div class="line">        $(<span class="built_in">document</span>.body).append(<span class="string">'&lt;iframe id="js_sync_iframe" width="0" height="0" tabindex="-1" class="sync-iframe" src="'</span>+ otherHost + <span class="string">'/sync"&#125;/&gt;'</span>);</div><div class="line">        Common.syncWindow = <span class="built_in">document</span>.getElementById(<span class="string">"js_sync_iframe"</span>).contentWindow;</div><div class="line">    &#125;,</div><div class="line">    sendSyncData: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span>(Common.syncWindow) &#123;</div><div class="line">            <span class="keyword">let</span> otherHost = location.host == <span class="string">'www.a.com'</span> ? <span class="string">'http://a.com'</span> : <span class="string">'http://www.a.com'</span>;</div><div class="line">            <span class="keyword">let</span> data = <span class="built_in">JSON</span>.stringify(store.getAll());</div><div class="line">            Common.syncWindow.postMessage(data, otherHost);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>www.a.com的iframe<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">let</span> data = <span class="built_in">JSON</span>.parse(e.data);</div><div class="line">        <span class="keyword">if</span>(data &amp;&amp; <span class="keyword">typeof</span> data == <span class="string">'object'</span>) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> data) &#123;</div><div class="line">                store.set(key,data[key]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;,<span class="literal">false</span>);</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;localStorage的跨域处理&quot;&gt;&lt;a href=&quot;#localStorage的跨域处理&quot; class=&quot;headerlink&quot; title=&quot;localStorage的跨域处理&quot;&gt;&lt;/a&gt;localStorage的跨域处理&lt;/h3&gt;&lt;p&gt;localStora
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="localStorage" scheme="https://kuanglijun312.github.io/tags/localStorage/"/>
    
      <category term="iframe" scheme="https://kuanglijun312.github.io/tags/iframe/"/>
    
      <category term="message" scheme="https://kuanglijun312.github.io/tags/message/"/>
    
  </entry>
  
  <entry>
    <title>webpack使用</title>
    <link href="https://kuanglijun312.github.io/2016/06/21/webpack/"/>
    <id>https://kuanglijun312.github.io/2016/06/21/webpack/</id>
    <published>2016-06-21T03:17:54.000Z</published>
    <updated>2016-09-02T03:12:56.187Z</updated>
    
    <content type="html"><![CDATA[<h3 id="webpack简介"><a href="#webpack简介" class="headerlink" title="webpack简介"></a>webpack简介</h3><p>web端模块打包工具；参考: <a href="http://www.w3ctech.com/topic/1557" target="_blank" rel="external">webpack 入门及实践</a>, <a href="http://zhizhi.betahouse.us/2015/09/27/yi-webpackde-demos/" target="_blank" rel="external">webpack 的 demos</a>,<a href="http://wwsun.github.io/posts/react-with-es6-part-1.html" target="_blank" rel="external">使用ES6编写React应用（1）：简介及环境配置</a>等等;<br><a id="more"></a></p>
<p>基础知识参考上面的链接;<br>下面是我的一些配置，支持实时刷新，已经部分说明,项目地址：<a href="https://github.com/kuanglijun312/myWebpackDemo" target="_blank" rel="external">myWebpackDemo</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">var path = require(&apos;path&apos;);</div><div class="line">var webpack = require(&apos;webpack&apos;);</div><div class="line"></div><div class="line"></div><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);</div><div class="line">var CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;);</div><div class="line"></div><div class="line">var uglifyJsPlugin = webpack.optimize.UglifyJsPlugin;</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">    entry: &#123;</div><div class="line">        index: [&apos;webpack-dev-server/client?http://127.0.0.1:8083/&apos;,&apos;webpack/hot/dev-server&apos;,&apos;babel-polyfill&apos;,</div><div class="line">             &apos;./src/index.js&apos;]</div><div class="line">    &#125;,</div><div class="line">    output: &#123;</div><div class="line">        path: path.resolve(__dirname, &apos;build&apos;),</div><div class="line">        filename: &quot;[name].js&quot;,</div><div class="line">        publicPath: &apos;http://127.0.0.1:8083/build/&apos;,</div><div class="line">        outputPath: path.join(__dirname, &apos;dist&apos;)</div><div class="line">    &#125;,</div><div class="line">    devServer: &#123;</div><div class="line">        inline:true,</div><div class="line">        hot: true,</div><div class="line">        port: 8083,</div><div class="line">        progress: true,</div><div class="line">        headers: &#123;</div><div class="line">            &quot;Access-Control-Allow-Origin&quot;: &quot;*&quot;,</div><div class="line">        &#125;,</div><div class="line">        contentBase: &apos;./src&apos;</div><div class="line">      &#125;,</div><div class="line">    resolve: &#123;</div><div class="line">        extensions: [&quot;&quot;, &quot;.js&quot;,&quot;.jsx&quot;, &quot;.css&quot;, &quot;.styl&quot;],</div><div class="line">    &#125;,</div><div class="line">    module: &#123;</div><div class="line">        loaders: [&#123;</div><div class="line">          test: /\.jsx?$/, </div><div class="line">          loader: &apos;babel-loader&apos;,</div><div class="line">          exclude:/node_modules/,</div><div class="line">          query:</div><div class="line">            &#123;</div><div class="line">                presets:[&apos;es2015&apos;,&apos;stage-2&apos;]</div><div class="line">            &#125;</div><div class="line">        &#125;, &#123;</div><div class="line">          test: /\.css$/, // Only .css files</div><div class="line">          exclude:/node_modules/,</div><div class="line">          // loader: &apos;style!css&apos;,</div><div class="line">          loader: process.env.NODE_ENV == &apos;production&apos; ?  ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader&quot;): &apos;style!css&apos; // Run both loaders</div><div class="line">          // loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader&quot;)</div><div class="line">        &#125;,&#123;</div><div class="line">          test:   /\.styl$/,</div><div class="line">          exclude:/node_modules/,</div><div class="line">          // loader:&apos;style-loader!css-loader!stylus-loader&apos;,</div><div class="line">          loader: process.env.NODE_ENV == &apos;production&apos; ? ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader!stylus-loader&quot;) : &apos;style-loader!css-loader!stylus-loader&apos;</div><div class="line">            // loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader!stylus-loader&quot;)</div><div class="line">        &#125;, &#123;</div><div class="line">          test: /\.(png|jpg)$/,</div><div class="line">          exclude:/node_modules/,</div><div class="line">          loader: &apos;url?limit=25000&apos;</div><div class="line">        &#125;</div><div class="line">    ]&#125;,</div><div class="line">      stylus: &#123;</div><div class="line">          use: [require(&apos;nib&apos;)()],</div><div class="line">          import: [&apos;~nib/lib/nib/index.styl&apos;]</div><div class="line">        &#125;,</div><div class="line">      plugins: [</div><div class="line">        new webpack.HotModuleReplacementPlugin(),</div><div class="line">        new webpack.NoErrorsPlugin()</div><div class="line">        </div><div class="line">       ].concat(process.env.NODE_ENV == &apos;production&apos; ? new uglifyJsPlugin(&#123;</div><div class="line">          compress: &#123;</div><div class="line">            warnings: false</div><div class="line">          &#125;</div><div class="line">        &#125;) : [])</div><div class="line">       .concat(process.env.NODE_ENV == &apos;production&apos; ? new CopyWebpackPlugin([&#123;from: &apos;src/*.html&apos;&#125;,&#123;from:&apos;build&apos;&#125;]) : [])</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>部分说明: extract-text-webpack-plugin, copy-webpack-plugin; 请查相关资料；<br>首先这个项目需要<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -save webpack babel-core babel-loader babel-polyfill babel-preset-es2015 babel-preset-stage-2 css-loader file-loader extract-text-webpack-plugin stylus url-loader copy-webpack-plugin webpack-dev-server</div></pre></td></tr></table></figure></p>
<p>如果需要reactjs请添加： babel-preset-react</p>
<p>其中比较困惑的地方在于output的publicPath，这个就是最后引用的js的地址，比如这个例子,index.js要访问到，就需要<a href="http://127.0.0.1:8083/build/index.js" target="_blank" rel="external">http://127.0.0.1:8083/build/index.js</a>;</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;webpack简介&quot;&gt;&lt;a href=&quot;#webpack简介&quot; class=&quot;headerlink&quot; title=&quot;webpack简介&quot;&gt;&lt;/a&gt;webpack简介&lt;/h3&gt;&lt;p&gt;web端模块打包工具；参考: &lt;a href=&quot;http://www.w3ctech.com/topic/1557&quot;&gt;webpack 入门及实践&lt;/a&gt;, &lt;a href=&quot;http://zhizhi.betahouse.us/2015/09/27/yi-webpackde-demos/&quot;&gt;webpack 的 demos&lt;/a&gt;,&lt;a href=&quot;http://wwsun.github.io/posts/react-with-es6-part-1.html&quot;&gt;使用ES6编写React应用（1）：简介及环境配置&lt;/a&gt;等等;&lt;br&gt;
    
    </summary>
    
    
      <category term="nodejs" scheme="https://kuanglijun312.github.io/tags/nodejs/"/>
    
      <category term="react" scheme="https://kuanglijun312.github.io/tags/react/"/>
    
      <category term="webpack" scheme="https://kuanglijun312.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>stylus一些使用示例</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/stylus-demo/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/stylus-demo/</id>
    <published>2016-06-20T08:55:29.000Z</published>
    <updated>2016-09-02T03:12:56.187Z</updated>
    
    <content type="html"><![CDATA[<p>承接上篇文章<a href="http://kuanglijun312.github.io/2016/06/20/stylus-use/">stylus使用</a><br>同时对reactjs笔记的样式补充<br><a id="more"></a></p>
<ol>
<li>material input (结构参考reactjs的笔记)<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">.material-input-wrap</div><div class="line">    text-align center</div><div class="line">    position relative</div><div class="line">    margin-top 35px</div><div class="line">    .input-content</div><div class="line">        width 100%</div><div class="line">        border none</div><div class="line">        border-bottom color-border-bottom 2px solid</div><div class="line">        height 40px</div><div class="line">        line-height 40px</div><div class="line">        text-align inherit</div><div class="line">        &amp;:focus ~ .input-label</div><div class="line">            color color-red</div><div class="line">        &amp;:focus ~ .input-label,&amp;:valid ~ .input-label</div><div class="line">            top -15px</div><div class="line">            font-weight 300</div><div class="line">            transform translate3d(0,0,0) scale(0.7)</div><div class="line">        &amp;:focus ~ .bar:before,&amp;:focus ~ .bar:after</div><div class="line">            width 50%</div><div class="line">    .input-label</div><div class="line">        absolute left 0 top 17px</div><div class="line">        color color-gray</div><div class="line">        width 100%</div><div class="line">        font-size font-size-14</div><div class="line">        font-weight 300</div><div class="line">        transition all .2s animate-func-bezier</div><div class="line">        backface-visibility hidden</div><div class="line">        transform-style preserve-3d</div><div class="line">        pointer-events none</div><div class="line">    .bar</div><div class="line">        absolute left 0 bottom 0</div><div class="line">        width 100%</div><div class="line">        cursor default</div><div class="line">        &amp;:before,&amp;:after</div><div class="line">            content ''</div><div class="line">            height 2px</div><div class="line">            width 0</div><div class="line">            absolute bottom 0</div><div class="line">            background-color color-red</div><div class="line">            transition all .2s animate-func-bezier</div><div class="line">        &amp;:before</div><div class="line">            left 50%</div><div class="line">        &amp;:after</div><div class="line">            right 50%</div></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/img/input-normal.png" alt="input-normal.png"> <img src="/img/input-focus.png" alt="input-focus.png"> <img src="/img/input-validate.png" alt="input-validate.png"></p>
<ol>
<li>checkbox,radio的样式<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">.checkbox-wrap,.radio-wrap</div><div class="line">    color color-black</div><div class="line">    display inline-block</div><div class="line">    position relative</div><div class="line">    cursor pointer</div><div class="line">    .input-checkbox,.input-radio</div><div class="line">        margin 0</div><div class="line">        margin-right 10px</div><div class="line">        vertical-align top</div><div class="line">        opacity 0</div><div class="line">    em</div><div class="line">        vertical-align middle</div><div class="line">    em:before</div><div class="line">        content ''</div><div class="line">        absolute left 0px top -1px</div><div class="line">        width 16px</div><div class="line">        height 16px</div><div class="line">        border 1px solid color-black</div><div class="line">        box-sizing border-box</div><div class="line">        padding 3px</div><div class="line">    em:after</div><div class="line">        content ''</div><div class="line">        z-index 1</div><div class="line">        absolute left 3px top 2px</div><div class="line">        width 10px</div><div class="line">        height 10px</div><div class="line">        backface-visibility hidden</div><div class="line">        transform-style preserve-3d</div><div class="line">        transition all .2s animate-func-bezier</div><div class="line">        transform translate3d(0,0,0) scale(0)</div><div class="line">        background #fff</div><div class="line">    input:checked + em:after</div><div class="line">        transform translate3d(0,0,0) scale(1)</div><div class="line">        background color-red</div></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/img/checkbox-uncheck.png" alt="checkbox-uncheck.png"> <img src="/img/checkbox-checked.png" alt="checkbox-checked.png"></p>
<ol>
<li>面包条,后面加 / <figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.breadcrumbs-wrap</div><div class="line">    diplay inline-block</div><div class="line">    li</div><div class="line">        display inline-block</div><div class="line">        font-size font-size-12</div><div class="line">        a</div><div class="line">            color color-gray</div><div class="line">            transition all .2s</div><div class="line">            @media big</div><div class="line">                &amp;:hover</div><div class="line">                    color color-black</div><div class="line">        a:after</div><div class="line">            content '/'</div><div class="line">            font-size 80%</div><div class="line">            display inline-block</div><div class="line">            vertical-align middle</div><div class="line">            padding 0 3px</div><div class="line">        span</div><div class="line">            color color-black</div></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/img/breadcrumbs.png" alt="breadcrumbs.png"></p>
<ol>
<li>省市区联动<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.city-link-wrap</span></div><div class="line">    <span class="selector-class">.my-select-wrap</span></div><div class="line">        <span class="attribute">margin-right</span> <span class="number">3%</span></div><div class="line">        <span class="attribute">border-bottom</span> <span class="number">2px</span> solid color-border-bottom</div><div class="line">        <span class="attribute">width</span> <span class="number">30%</span></div><div class="line">        &amp;:last-child</div><div class="line">            <span class="attribute">margin-right</span> <span class="number">0</span></div><div class="line">        @media middlesmall</div><div class="line">            <span class="attribute">width</span> <span class="number">100%</span></div><div class="line">            <span class="attribute">margin-bottom</span> <span class="number">20px</span></div><div class="line">            &amp;:last-child</div><div class="line">                <span class="attribute">margin-bottom</span> <span class="number">0</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/img/link-city.png" alt="link-city.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;承接上篇文章&lt;a href=&quot;http://kuanglijun312.github.io/2016/06/20/stylus-use/&quot;&gt;stylus使用&lt;/a&gt;&lt;br&gt;同时对reactjs笔记的样式补充&lt;br&gt;
    
    </summary>
    
    
      <category term="stylus" scheme="https://kuanglijun312.github.io/tags/stylus/"/>
    
      <category term="css" scheme="https://kuanglijun312.github.io/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>stylus使用</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/stylus-use/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/stylus-use/</id>
    <published>2016-06-20T07:55:29.000Z</published>
    <updated>2016-09-02T03:12:56.187Z</updated>
    
    <content type="html"><![CDATA[<h3 id="stylus介绍"><a href="#stylus介绍" class="headerlink" title="stylus介绍"></a>stylus介绍</h3><p>css很多人用sass,less，还有一个stylus，我不太想用sass,less的原因，是由于他们用了ruby，而stylus是使用的nodejs。大家可以google一下<br>文档: <a href="http://stylus-lang.com/" target="_blank" rel="external">官网</a>, <a href="http://www.zhangxinxu.com/jq/stylus/" target="_blank" rel="external">stylus中文版</a>,该翻译的作者博客很多，很牛！</p>
<a id="more"></a>
<p>相关语法自己去看吧，下面只是记录一些常用的</p>
<ol>
<li><p>&amp;的使用， 字符&amp;指向父选择器</p>
</li>
<li><p>定义变量，例如</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">font-size</span>-<span class="number">12</span>=<span class="number">1.2rem</span></div><div class="line"><span class="attribute">font-size</span>-<span class="number">13</span>=<span class="number">1.3rem</span></div><div class="line"><span class="attribute">font-size</span>-<span class="number">14</span>=<span class="number">1.4rem</span></div><div class="line"><span class="attribute">font-size</span>-<span class="number">16</span>=<span class="number">1.6rem</span></div><div class="line"><span class="attribute">font-size</span>-<span class="number">18</span>=<span class="number">1.8rem</span></div></pre></td></tr></table></figure>
</li>
<li><p>使用同级或者上级的变量</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.my-select-arrow</span></div><div class="line">    <span class="attribute">width</span> <span class="number">12px</span> </div><div class="line">    <span class="attribute">height</span> <span class="number">20px</span></div><div class="line">    <span class="attribute">background-size</span> @width @height</div><div class="line">    <span class="attribute">margin-top</span> -<span class="number">12px</span></div></pre></td></tr></table></figure>
</li>
<li><p>自定义函数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//底部加红色条动画</div><div class="line">func_hover_bottom_spread(sel,bgcolor = #ed2c2c)</div><div class="line">    &#123;sel&#125;</div><div class="line">        cursor pointer</div><div class="line">        position relative</div><div class="line">        padding-top 6px</div><div class="line">        padding-bottom 6px</div><div class="line">        &amp;:before,&amp;:after</div><div class="line">            content ' '</div><div class="line">            absolute bottom 0</div><div class="line">            height 2px</div><div class="line">            background-color bgcolor</div><div class="line">            width 0</div><div class="line">            transition all .2s animate-func-bezier</div><div class="line">            transform-style preserve-3d</div><div class="line">            backface-visibility hidden</div><div class="line">        &amp;:before</div><div class="line">            left 50%</div><div class="line">        &amp;:after</div><div class="line">            right 50%</div><div class="line">        @media big</div><div class="line">            &amp;:hover::before,&amp;:hover::after</div><div class="line">                width 50%</div></pre></td></tr></table></figure>
</li>
</ol>
<p>使用:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">func_hover_bottom_spread</span><span class="params">(<span class="string">'.action-hover-bottom-spread'</span>)</span></span> <span class="comment">//对所有的action-hover-bottom-spread,都会有该动画</span></div></pre></td></tr></table></figure></p>
<p>对选择器使用 {}；</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;stylus介绍&quot;&gt;&lt;a href=&quot;#stylus介绍&quot; class=&quot;headerlink&quot; title=&quot;stylus介绍&quot;&gt;&lt;/a&gt;stylus介绍&lt;/h3&gt;&lt;p&gt;css很多人用sass,less，还有一个stylus，我不太想用sass,less的原因，是由于他们用了ruby，而stylus是使用的nodejs。大家可以google一下&lt;br&gt;文档: &lt;a href=&quot;http://stylus-lang.com/&quot;&gt;官网&lt;/a&gt;, &lt;a href=&quot;http://www.zhangxinxu.com/jq/stylus/&quot;&gt;stylus中文版&lt;/a&gt;,该翻译的作者博客很多，很牛！&lt;/p&gt;
    
    </summary>
    
    
      <category term="stylus" scheme="https://kuanglijun312.github.io/tags/stylus/"/>
    
      <category term="css" scheme="https://kuanglijun312.github.io/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>es6一些常用的</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/es6-some-important/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/es6-some-important/</id>
    <published>2016-06-20T07:55:29.000Z</published>
    <updated>2016-09-02T03:12:56.185Z</updated>
    
    <content type="html"><![CDATA[<h3 id="es6常用的一些"><a href="#es6常用的一些" class="headerlink" title="es6常用的一些"></a>es6常用的一些</h3><ol>
<li>消除var； 尽可能的使用let;</li>
<li>使用箭头函数，如 () -&gt; {}; 箭头函数还在当前域里,注意arguments,this；</li>
<li>使用 …; 例如: let {name = ‘’,…ohterInfo} = {name=”kuanglijun”,avatar:’<a href="http://kuanglijun312.github.io/img/logo.png&#39;,nickname=&quot;harley&quot;}">http://kuanglijun312.github.io/img/logo.png&#39;,nickname=&quot;harley&quot;}</a>;</li>
<li>函数使用默认参数，例如showLoading = (msg = ‘正在加载中…’) { … other code; }</li>
<li><p>普通对象赋值，比如: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> a = <span class="number">1</span>,b =<span class="number">2</span>; </div><div class="line"><span class="keyword">let</span> obj = &#123;a,b&#125;;  <span class="comment">//result is obj = &#123;a: 1,b:2 &#125;;</span></div></pre></td></tr></table></figure>
</li>
<li><p>object.assign , array.map等等常用的方法</p>
</li>
<li>类的实现, 已有类的概念, contructor构造函数</li>
<li>Promise, function* ,yield的使用<a id="more"></a>
</li>
</ol>
<p>tips:<br>Object.assign，一些浏览器含有，一些没有，需要引用 ‘babel-polyfill’; 如果没有，请用下面的代码处理<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">assign: <span class="function"><span class="keyword">function</span> (<span class="params">target</span>) </span>&#123;</div><div class="line"><span class="meta">        'use strict'</span>;</div><div class="line">        <span class="keyword">if</span> (target === <span class="literal">undefined</span> || target === <span class="literal">null</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Cannot convert undefined or null to object'</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> output = <span class="built_in">Object</span>(target);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> index = <span class="number">1</span>; index &lt; <span class="built_in">arguments</span>.length; index++) &#123;</div><div class="line">            <span class="keyword">var</span> source = <span class="built_in">arguments</span>[index];</div><div class="line">            <span class="keyword">if</span> (source !== <span class="literal">undefined</span> &amp;&amp; source !== <span class="literal">null</span>) &#123;</div><div class="line">              <span class="keyword">for</span> (<span class="keyword">var</span> nextKey <span class="keyword">in</span> source) &#123;</div><div class="line">                <span class="keyword">if</span> (source.hasOwnProperty(nextKey)) &#123;</div><div class="line">                  output[nextKey] = source[nextKey];</div><div class="line">                &#125;</div><div class="line">              &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> output;</div><div class="line">    &#125;,</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;es6常用的一些&quot;&gt;&lt;a href=&quot;#es6常用的一些&quot; class=&quot;headerlink&quot; title=&quot;es6常用的一些&quot;&gt;&lt;/a&gt;es6常用的一些&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;消除var； 尽可能的使用let;&lt;/li&gt;
&lt;li&gt;使用箭头函数，如 () -&amp;gt; {}; 箭头函数还在当前域里,注意arguments,this；&lt;/li&gt;
&lt;li&gt;使用 …; 例如: let {name = ‘’,…ohterInfo} = {name=”kuanglijun”,avatar:’&lt;a href=&quot;http://kuanglijun312.github.io/img/logo.png&amp;#39;,nickname=&amp;quot;harley&amp;quot;}&quot;&gt;http://kuanglijun312.github.io/img/logo.png&amp;#39;,nickname=&amp;quot;harley&amp;quot;}&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;函数使用默认参数，例如showLoading = (msg = ‘正在加载中…’) { … other code; }&lt;/li&gt;
&lt;li&gt;&lt;p&gt;普通对象赋值，比如: &lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,b =&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; obj = &amp;#123;a,b&amp;#125;;  &lt;span class=&quot;comment&quot;&gt;//result is obj = &amp;#123;a: 1,b:2 &amp;#125;;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;object.assign , array.map等等常用的方法&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;类的实现, 已有类的概念, contructor构造函数&lt;/li&gt;
&lt;li&gt;Promise, function* ,yield的使用
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="es6" scheme="https://kuanglijun312.github.io/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>我的一些常用的js方法，备忘</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/my-js-use-func/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/my-js-use-func/</id>
    <published>2016-06-20T07:55:29.000Z</published>
    <updated>2016-09-02T03:12:56.186Z</updated>
    
    <content type="html"><![CDATA[<h3 id="常用的一些变量或者方法"><a href="#常用的一些变量或者方法" class="headerlink" title="常用的一些变量或者方法"></a>常用的一些变量或者方法</h3><ol>
<li>透明图片<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> blankSrc = <span class="string">'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'</span></div></pre></td></tr></table></figure>
</li>
</ol>
<a id="more"></a>
<ol>
<li><p>发请求,use jquery;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">sendRequest: <span class="function"><span class="keyword">function</span>(<span class="params">&#123;url, params = &#123;&#125;, success,error,callback,method = 'POST', mask = false,progress, noErrorToast = false&#125;</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> otherCfg = &#123;&#125;;</div><div class="line">    <span class="comment">// 文件形式</span></div><div class="line">    <span class="keyword">if</span>(params <span class="keyword">instanceof</span> FormData) &#123;</div><div class="line">        otherCfg = &#123;</div><div class="line">            processData: <span class="literal">false</span>,</div><div class="line">            contentType: <span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> progress == <span class="string">'function'</span>) &#123;</div><div class="line">            otherCfg[<span class="string">'xhr'</span>] = () =&gt; &#123;</div><div class="line">                <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="built_in">window</span>.XMLHttpRequest();</div><div class="line">                xhr.timeout = <span class="number">5</span>*<span class="number">60</span>*<span class="number">1000</span>;</div><div class="line">                <span class="comment">//Upload progress</span></div><div class="line">                xhr.upload.addEventListener(<span class="string">"progress"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>)</span>&#123;</div><div class="line">                  <span class="keyword">if</span> (evt.lengthComputable) &#123;</div><div class="line">                    <span class="keyword">var</span> percentComplete = evt.loaded / evt.total;</div><div class="line">                    <span class="comment">//Do something with upload progress</span></div><div class="line">                    <span class="keyword">var</span> percentage = <span class="built_in">Math</span>.floor((percentComplete) * <span class="number">100</span>);</div><div class="line">                    <span class="keyword">if</span>(<span class="keyword">typeof</span> progress === <span class="string">'function'</span>) &#123;</div><div class="line">                        progress(percentage,evt);</div><div class="line">                    &#125;</div><div class="line">                  &#125;</div><div class="line">                &#125;, <span class="literal">false</span>);</div><div class="line">                <span class="comment">//Download progress</span></div><div class="line">                xhr.addEventListener(<span class="string">"progress"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>)</span>&#123;</div><div class="line">                  <span class="keyword">if</span> (evt.lengthComputable) &#123;</div><div class="line">                    <span class="keyword">var</span> percentComplete = evt.loaded / evt.total;</div><div class="line">                    <span class="comment">//Do something with download progress</span></div><div class="line">                  &#125;</div><div class="line">                &#125;, <span class="literal">false</span>);</div><div class="line">                <span class="keyword">return</span> xhr;</div><div class="line">              &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(mask) &#123;</div><div class="line">        Common.showLoading()</div><div class="line">    &#125;</div><div class="line">    $.ajax(<span class="built_in">Object</span>.assign(&#123;</div><div class="line">        type:method,</div><div class="line">        url: url,</div><div class="line">        data: params,</div><div class="line">        cache:<span class="literal">false</span>,</div><div class="line">        crossDomain: <span class="literal">true</span>,</div><div class="line">        dataType:<span class="string">'json'</span>,</div><div class="line">        timeout: <span class="number">5</span>*<span class="number">60</span>*<span class="number">1000</span>,</div><div class="line">        beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params">request</span>) </span>&#123;</div><div class="line">            <span class="comment">//add customer header</span></div><div class="line">            request.setRequestHeader(<span class="string">"clienttype"</span>, <span class="string">'3'</span>);</div><div class="line">        &#125;,</div><div class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(mask) &#123;</div><div class="line">                Common.showLoading()</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">let</span> json_data = data;</div><div class="line">            <span class="keyword">var</span> status = json_data.status;</div><div class="line">            <span class="keyword">var</span> result = json_data.result;</div><div class="line">            <span class="keyword">var</span> message = json_data.message;</div><div class="line">            <span class="keyword">if</span>( status == <span class="number">1</span>)&#123;</div><div class="line">                <span class="keyword">if</span>(message != <span class="string">"OK"</span>) &#123;</div><div class="line">                    Common.showToast(message);</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span>(<span class="keyword">typeof</span> success === <span class="string">'function'</span>) success(result,json_data);</div><div class="line">                <span class="keyword">if</span>(<span class="keyword">typeof</span> callback === <span class="string">'function'</span>) callback(status,result,json_data);</div><div class="line">            &#125;<span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// toastr.error(message);</span></div><div class="line">                <span class="keyword">if</span>(!noErrorToast) Common.showToast(message,<span class="string">'error'</span>);</div><div class="line">                <span class="keyword">if</span>(<span class="keyword">typeof</span> error === <span class="string">'function'</span>) error(json_data,message);</div><div class="line">                <span class="keyword">if</span>(<span class="keyword">typeof</span> callback === <span class="string">'function'</span>) callback(status,json_data,message);</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        error:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="comment">// toastr.error("系统异常!");</span></div><div class="line">            Common.showToast(<span class="string">'系统异常!'</span>,<span class="string">'error'</span>);</div><div class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> callback === <span class="string">'function'</span>) callback(<span class="number">-1000000</span>);</div><div class="line">            <span class="keyword">if</span>(mask) &#123;</div><div class="line">                Common.showLoading()</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;,otherCfg))</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
</li>
<li><p>canvas相关:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">cropSizeRect: <span class="function"><span class="keyword">function</span> (<span class="params">img,width,height,crop</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span>(img.dataset.src.indexOf(<span class="string">'http'</span>) !== <span class="number">0</span> ||img.src.length &gt; <span class="number">100</span>) &#123;</div><div class="line">            $(img).css(&#123;<span class="string">'background'</span>:<span class="string">'none'</span>&#125;);</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        setTimeout(() =&gt; &#123;</div><div class="line">            <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</div><div class="line">            image.crossOrigin = <span class="string">""</span>;</div><div class="line">            image.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">                image.onload = <span class="literal">null</span>;</div><div class="line">                $(img).css(&#123;<span class="string">'background'</span>:<span class="string">'none'</span>&#125;);</div><div class="line">                img.src = Common.getCompressImageBase64ForSize(image,width,height,<span class="literal">false</span>,crop);</div><div class="line">            &#125;</div><div class="line">            image.src = img.dataset.src;</div><div class="line">            img.onload = <span class="literal">null</span>;</div><div class="line">        &#125;,<span class="number">10</span>)</div><div class="line">    &#125;,</div><div class="line">    getBase64Image: <span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</div><div class="line">        <span class="comment">// Create an empty canvas element</span></div><div class="line">        <span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</div><div class="line">        canvas.width = img.width;</div><div class="line">        canvas.height = img.height;</div><div class="line">        <span class="comment">// Copy the image contents to the canvas</span></div><div class="line"></div><div class="line">        <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</div><div class="line">        ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">        <span class="comment">// Get the data-URL formatted image</span></div><div class="line">        <span class="comment">// Firefox supports PNG and JPEG. You could check img.src to</span></div><div class="line">        <span class="comment">// guess the original format, but be aware the using "image/jpg"</span></div><div class="line">        <span class="comment">// will re-encode the image.</span></div><div class="line">        <span class="keyword">return</span> canvas.toDataURL();</div><div class="line">    &#125;,</div><div class="line">    getCompressImageBase64ForSize: <span class="function"><span class="keyword">function</span> (<span class="params">img,width,height,output_format,crop</span>) </span>&#123;</div><div class="line">        output_format = output_format || <span class="string">'image/png'</span>;</div><div class="line">        <span class="keyword">var</span> cvs = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">        cvs.width = width;</div><div class="line">        cvs.height = height;</div><div class="line">        <span class="keyword">var</span> ctx = cvs.getContext(<span class="string">'2d'</span>);</div><div class="line">        <span class="keyword">var</span> imgW = img.width;</div><div class="line">        <span class="keyword">var</span> imgH = img.height;</div><div class="line">        <span class="keyword">if</span>(crop) &#123;</div><div class="line">            <span class="comment">// 取中间部分</span></div><div class="line">            <span class="keyword">var</span> scale = <span class="built_in">Math</span>.min(imgW/width,imgH/height);</div><div class="line">            <span class="keyword">var</span> x = (imgW - width*scale)/<span class="number">2</span>;</div><div class="line">            <span class="keyword">var</span> y = (imgH - height*scale)/<span class="number">2</span>;</div><div class="line">            ctx.drawImage(img, <span class="built_in">Math</span>.max(<span class="number">0</span>,x), <span class="built_in">Math</span>.max(<span class="number">0</span>,y), width*scale, height*scale, <span class="number">0</span>, <span class="number">0</span>, width, height);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// 全部显示，中间占满</span></div><div class="line">            <span class="keyword">var</span> scale = <span class="built_in">Math</span>.max(imgW/width,imgH/height);</div><div class="line">            <span class="keyword">var</span> x = (width - imgW/scale)/<span class="number">2</span>;</div><div class="line">            <span class="keyword">var</span> y = (height - imgH/scale)/<span class="number">2</span>;</div><div class="line">            ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, imgW, imgH, x, y,imgW/scale,imgH/scale);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> newImageData = cvs.toDataURL(output_format, <span class="number">100</span>);</div><div class="line">        <span class="keyword">return</span> newImageData;</div><div class="line">    &#125;,</div><div class="line">    checkImageSize: <span class="function"><span class="keyword">function</span>(<span class="params">image, minW, minH, maxW, maxH, cbOK, cbNo</span>) </span>&#123;</div><div class="line">        <span class="comment">//check whether browser fully supports all File API</span></div><div class="line">        <span class="keyword">if</span> (<span class="built_in">window</span>.File &amp;&amp; <span class="built_in">window</span>.FileReader &amp;&amp; <span class="built_in">window</span>.FileList &amp;&amp; <span class="built_in">window</span>.Blob) &#123;</div><div class="line">            <span class="keyword">var</span> fr = <span class="keyword">new</span> FileReader;</div><div class="line">            fr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// file is loaded</span></div><div class="line">                <span class="keyword">var</span> img = <span class="keyword">new</span> Image;</div><div class="line">                img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// image is loaded; sizes are available</span></div><div class="line">                    <span class="keyword">if</span>((minW &gt; <span class="number">0</span> &amp;&amp; img.width &lt; minW) || (minH &gt; <span class="number">0</span> &amp;&amp; img.height &lt; minH) || </div><div class="line">                        (maxW &gt; <span class="number">0</span> &amp;&amp; img.width &gt; maxW) || (maxH &gt; <span class="number">0</span> &amp;&amp; img.height &gt; maxH)) &#123;  </div><div class="line">                        cbNo &amp;&amp; cbNo();</div><div class="line">                    &#125;<span class="keyword">else</span>&#123;</div><div class="line">                        cbOK &amp;&amp; cbOK();</div><div class="line">                    &#125;</div><div class="line">                &#125;;</div><div class="line">                img.src = fr.result; <span class="comment">// is the data URL because called with readAsDataURL</span></div><div class="line">            &#125;;</div><div class="line">            fr.readAsDataURL(image.files[<span class="number">0</span>]);</div><div class="line">        &#125;</div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
</li>
<li><p>url相关</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 针对 http://aa.com?t=100&amp;p=1#t=2 ，该方法取出t为2； </span></div><div class="line">getUrlParam: <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> local_url = <span class="built_in">document</span>.location.href;</div><div class="line">        <span class="keyword">var</span> arr = local_url.split(<span class="string">'?'</span>);</div><div class="line">        <span class="keyword">if</span>(arr.length &lt;= <span class="number">1</span>) &#123;</div><div class="line">            arr = local_url.split(<span class="string">'#'</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(arr.length &lt;= <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// split hash</span></div><div class="line">        <span class="keyword">var</span> p = arr[<span class="number">1</span>].split(<span class="string">'#'</span>);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> params = &#123;&#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,l = p.length; i &lt; l; i++) &#123;</div><div class="line">            <span class="keyword">var</span> p_arr = p[i].split(<span class="string">'&amp;'</span>);</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>, n = p_arr.length; j &lt; n; j++) &#123;</div><div class="line">                <span class="keyword">var</span> kv = p_arr[j].split(<span class="string">'='</span>);</div><div class="line">                <span class="keyword">if</span>(kv.length &gt; <span class="number">0</span>)</div><div class="line">                    params[<span class="built_in">decodeURIComponent</span>(kv[<span class="number">0</span>])] = kv.length &gt; <span class="number">1</span> ? <span class="built_in">decodeURIComponent</span>(kv[<span class="number">1</span>]) : <span class="string">''</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> params[key] === <span class="literal">undefined</span> ? <span class="string">''</span> : params[key];</div><div class="line">    &#125;,</div><div class="line">    addUrlHash: <span class="function"><span class="keyword">function</span>(<span class="params">key,val,mustAdd</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> hash = location.hash;</div><div class="line">        <span class="keyword">if</span>(hash.indexOf(<span class="string">'#'</span>) == <span class="number">0</span>) &#123;</div><div class="line">            hash = hash.substr(<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> params = &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> p_arr = hash.split(<span class="string">'&amp;'</span>);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>, n = p_arr.length; j &lt; n; j++) &#123;</div><div class="line">            <span class="keyword">var</span> kv = p_arr[j].split(<span class="string">'='</span>);</div><div class="line">            <span class="keyword">if</span>(kv.length &gt; <span class="number">1</span>)</div><div class="line">                params[kv[<span class="number">0</span>]] = kv.length &gt; <span class="number">1</span> ? kv[<span class="number">1</span>] : <span class="string">''</span>;</div><div class="line">        &#125;</div><div class="line">        params[key] = <span class="built_in">encodeURIComponent</span>(val);</div><div class="line">        <span class="keyword">if</span>(!mustAdd &amp;&amp; val === <span class="string">''</span>) &#123;</div><div class="line">            <span class="keyword">delete</span> params[key];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> arr = [];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> params) &#123;</div><div class="line">            arr.push(k+<span class="string">'='</span>+params[k]);</div><div class="line">        &#125;</div><div class="line">        location.hash = arr.join(<span class="string">'&amp;'</span>);</div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
</li>
<li><p>检查是否mobile</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">isMobile: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> mobile = [<span class="string">'iphone'</span>,<span class="string">'ipad'</span>,<span class="string">'android'</span>,<span class="string">'blackberry'</span>,<span class="string">'nokia'</span>,<span class="string">'opera mini'</span>,<span class="string">'windows mobile'</span>,<span class="string">'windows phone'</span>,<span class="string">'iemobile'</span>]; </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> mobile) <span class="keyword">if</span> (navigator.userAgent.toLowerCase().indexOf(mobile[i].toLowerCase()) &gt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            </div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
</li>
<li><p>时间相关</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 格式 2016-06-20 15:55:55</span></div><div class="line">getLocalDate: <span class="function"><span class="keyword">function</span>(<span class="params">datetime</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(datetime);</div><div class="line">        <span class="keyword">var</span> datestring = d.getFullYear() +  <span class="string">"-"</span> + (<span class="string">"0"</span>+(d.getMonth()+<span class="number">1</span>)).slice(<span class="number">-2</span>) + <span class="string">"-"</span> + (<span class="string">"0"</span> + d.getDate()).slice(<span class="number">-2</span>) + <span class="string">" "</span> </div><div class="line">        + (<span class="string">"0"</span> + d.getHours()).slice(<span class="number">-2</span>) + <span class="string">":"</span> + (<span class="string">"0"</span> + d.getMinutes()).slice(<span class="number">-2</span>) + <span class="string">":"</span> + (<span class="string">"0"</span> + d.getSeconds()).slice(<span class="number">-2</span>);</div><div class="line">        <span class="keyword">return</span> datestring;</div><div class="line">        <span class="comment">// return date.toString();</span></div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
</li>
<li><p>文件相关</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">dataURItoBlob: <span class="function"><span class="keyword">function</span> (<span class="params">dataURI, callback</span>) </span>&#123;</div><div class="line">        <span class="comment">// convert base64 to raw binary data held in a string</span></div><div class="line">        <span class="comment">// doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this</span></div><div class="line">        <span class="keyword">var</span> byteString = atob(dataURI.split(<span class="string">','</span>)[<span class="number">1</span>]);</div><div class="line"></div><div class="line">        <span class="comment">// separate out the mime component</span></div><div class="line">        <span class="keyword">var</span> mimeString = dataURI.split(<span class="string">','</span>)[<span class="number">0</span>].split(<span class="string">':'</span>)[<span class="number">1</span>].split(<span class="string">';'</span>)[<span class="number">0</span>]</div><div class="line"></div><div class="line">        <span class="comment">// write the bytes of the string to an ArrayBuffer</span></div><div class="line">        <span class="keyword">var</span> ab = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(byteString.length);</div><div class="line">        <span class="keyword">var</span> ia = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(ab);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; byteString.length; i++) &#123;</div><div class="line">            ia[i] = byteString.charCodeAt(i);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// write the ArrayBuffer to a blob, and you're done</span></div><div class="line">        <span class="keyword">var</span> bb = <span class="keyword">new</span> Blob([ab],&#123;type:mimeString&#125;);</div><div class="line">        <span class="keyword">return</span> bb;</div><div class="line">    &#125;,</div><div class="line">    getFilename: <span class="function"><span class="keyword">function</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">       <span class="keyword">if</span> (url) &#123;</div><div class="line">          <span class="keyword">var</span> m = url.toString().match(<span class="regexp">/.*\/(.+?)\./</span>);</div><div class="line">          <span class="keyword">if</span> (m &amp;&amp; m.length &gt; <span class="number">1</span>) &#123;</div><div class="line">             <span class="keyword">return</span> m[<span class="number">1</span>];</div><div class="line">          &#125;</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> <span class="string">"undefined"</span>;</div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
</li>
<li><p>数字相关</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">isFloat: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> floatRegex = <span class="regexp">/^-?\d+(\.[\d]+)?$/</span>;</div><div class="line">        <span class="keyword">if</span> (!floatRegex.test(val))</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line">        val = <span class="built_in">parseFloat</span>(val);</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">isNaN</span>(val))</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;,</div><div class="line">    isInt: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> intRegex = <span class="regexp">/^-?\d+$/</span>;</div><div class="line">        <span class="keyword">if</span> (!intRegex.test(val))</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> intVal = <span class="built_in">parseInt</span>(val, <span class="number">10</span>);</div><div class="line">        <span class="keyword">return</span> <span class="built_in">parseFloat</span>(val) == intVal &amp;&amp; !<span class="built_in">isNaN</span>(intVal);</div><div class="line">    &#125;,</div><div class="line">    moneyNumber: <span class="function"><span class="keyword">function</span>(<span class="params">money</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> parts= money.toString().split(<span class="string">"."</span>);</div><div class="line">        <span class="keyword">return</span> parts[<span class="number">0</span>].replace(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">","</span>) + (parts[<span class="number">1</span>] ? <span class="string">"."</span> + parts[<span class="number">1</span>] : <span class="string">""</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>验证相关</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">validate: <span class="function"><span class="keyword">function</span>(<span class="params">reg,val</span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> validateRegex = &#123;</div><div class="line">            <span class="string">'required'</span> : <span class="regexp">/^.+$/</span>,</div><div class="line">            <span class="string">'phone'</span> : <span class="regexp">/^1\d&#123;10&#125;$/</span>,</div><div class="line">            <span class="string">'smscode'</span>: <span class="regexp">/^\d&#123;6&#125;$/</span>,</div><div class="line">            <span class="string">'zipcode'</span>: <span class="regexp">/^\d&#123;6&#125;$/</span>,</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//邮编可以为空</span></div><div class="line">        <span class="keyword">if</span>(reg == <span class="string">'zipcode'</span> &amp;&amp; val == <span class="string">''</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> regex = validateRegex[reg];</div><div class="line">        <span class="keyword">if</span>(!regex) &#123;</div><div class="line">            regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(reg);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> regex.test(val);</div><div class="line">    &#125;,</div></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;常用的一些变量或者方法&quot;&gt;&lt;a href=&quot;#常用的一些变量或者方法&quot; class=&quot;headerlink&quot; title=&quot;常用的一些变量或者方法&quot;&gt;&lt;/a&gt;常用的一些变量或者方法&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;透明图片&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; blankSrc = &lt;span class=&quot;string&quot;&gt;&#39;data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7&#39;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="es6" scheme="https://kuanglijun312.github.io/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>reactjs使用笔记4</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/reactjs-use-note-4/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/reactjs-use-note-4/</id>
    <published>2016-06-20T05:36:19.000Z</published>
    <updated>2016-09-02T03:12:56.186Z</updated>
    
    <content type="html"><![CDATA[<h3 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h3><p>react很基本的，就是可以写各种适合自己的组件，当然github上，有很多已经可以用的，但有时候，可能找不到自己的，那就自己写吧，比如我就找了很多自定义的下拉框，在<a href="https://www.npmjs.com/" target="_blank" rel="external">https://www.npmjs.com/</a>上找了好久，也用了几个，但是由于他们考虑的比较全，用起来也不符合当前的设计，总是用起来不是很好，所以就自己写了一个，感觉很简单，哈哈<br><a id="more"></a><br>代码如下:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MySelect</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'MySelect'</span>;</div><div class="line">        <span class="keyword">this</span>.state = &#123;index: props.index||<span class="number">0</span>,options:props.options||[],showOption:<span class="literal">false</span>&#125;</div><div class="line">        <span class="keyword">this</span>.handleDocumentClick = <span class="keyword">this</span>.handleDocumentClick.bind(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">    onSelectOption(option,index) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">this</span>.props.onChange == <span class="string">'function'</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.props.onChange(option,index);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;index:index&#125;);</div><div class="line">    &#125;</div><div class="line">    componentDidMount() &#123;</div><div class="line">        $(<span class="built_in">document</span>).on(<span class="string">'click'</span>,<span class="keyword">this</span>.handleDocumentClick);</div><div class="line">    &#125;</div><div class="line">    componentWillUnmount() &#123;</div><div class="line">          $(<span class="built_in">document</span>).off(<span class="string">'click'</span>,<span class="keyword">this</span>.handleDocumentClick);</div><div class="line">    &#125;</div><div class="line">    handleDocumentClick(e) &#123;</div><div class="line">        <span class="keyword">if</span>($(e.target).parents(<span class="string">'.my-select-wrap'</span>)[<span class="number">0</span>] != <span class="keyword">this</span>.selectWrap) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;showOption:<span class="literal">false</span>&#125;);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;showOption:!<span class="keyword">this</span>.state.showOption&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    componentWillReceiveProps(nextProps) &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;options:nextProps.options&#125;);</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> nextProps.index !== <span class="string">'undefined'</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;index:nextProps.index&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    getValue() &#123;</div><div class="line">        <span class="keyword">let</span> &#123;index = <span class="number">0</span>,options=[]&#125; = <span class="keyword">this</span>.state;</div><div class="line">        <span class="keyword">if</span>(index &gt;= <span class="number">0</span> &amp;&amp; options.length &gt; index) &#123;</div><div class="line">            <span class="keyword">return</span> options[index].value;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">    &#125;</div><div class="line">    getSelectedIndex() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.state.index;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> &#123;name = <span class="string">''</span>,cls=<span class="string">''</span>&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="keyword">let</span> &#123;index = <span class="number">0</span>,options=[]&#125; = <span class="keyword">this</span>.state;</div><div class="line">        <span class="keyword">let</span> label = <span class="string">''</span>,value = <span class="string">''</span>;</div><div class="line">        <span class="keyword">if</span>(index &gt;= <span class="number">0</span> &amp;&amp; options.length &gt; index) &#123;</div><div class="line">            label = options[index].label;</div><div class="line">            value = options[index].value;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">my-select-wrap</span> "+<span class="attr">cls</span>+" "+(<span class="attr">this.state.showOption</span> ? '<span class="attr">show</span>'<span class="attr">:</span>'')&#125; <span class="attr">ref</span>=<span class="string">&#123;(c)</span> =&gt;</span> this.selectWrap = c&#125;&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"my-select-display"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"my-select-value-text"</span>&gt;</span>&#123;label&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"my-select-arrow"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">&#123;name&#125;</span> <span class="attr">value</span>=<span class="string">&#123;label&#125;</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"my-select-options-list"</span>&gt;</span></div><div class="line">                    &#123;this.state.options.map((item,i) =&gt; &#123;</div><div class="line">                        return <span class="tag">&lt;<span class="name">span</span> <span class="attr">key</span>=<span class="string">&#123;</span>'<span class="attr">option-</span>'+<span class="attr">i</span>&#125; <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">my-select-option</span> "+(<span class="attr">i</span> == <span class="string">index</span> ? '<span class="attr">selected</span>' <span class="attr">:</span> '')&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;this.onSelectOption(item,i)&#125;&#125;&gt;&#123;item.label&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                    &#125;)&#125;</div><div class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>核心代码，在render那里，主要把样式写好;样式代码如下:使用的是stylus，其实跟sass,less很像：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">.my-select-wrap</div><div class="line">    width 120px</div><div class="line">    display inline-block</div><div class="line">    position relative</div><div class="line">    color color-black</div><div class="line">    .my-select-display</div><div class="line">        clearfix()</div><div class="line">        padding 10px 6px</div><div class="line">        cursor pointer</div><div class="line">        position relative</div><div class="line">        .my-select-arrow</div><div class="line">            absolute right 5px top 50%</div><div class="line">            margin-top -6px</div><div class="line">            width 6px</div><div class="line">            height 10px</div><div class="line">            transform translate3d(0,0,0) rotate(-90deg)</div><div class="line">            transform-style preserve-3d</div><div class="line">            backface-visibility hidden</div><div class="line">            transition all .2s animate-func-bezier</div><div class="line">            background url(/img/arrow-gray-left.svg) center center no-repeat</div><div class="line">            background-size @width @height</div><div class="line">        .my-select-value-text</div><div class="line">            margin-right 15px</div><div class="line">            text-overflow ellipsis</div><div class="line">            white-space nowrap</div><div class="line">    &amp;.show</div><div class="line">        .my-select-display</div><div class="line">            .my-select-arrow</div><div class="line">                transform translate3d(0,0,0) rotate(-270deg)</div><div class="line">    .my-select-options-list</div><div class="line">        absolute left 0</div><div class="line">        width 100%</div><div class="line">        z-index 100</div><div class="line">        background rgba(255,255,255,.9)</div><div class="line">        box-shadow 0px 2px 5px 0px #e6e6e6</div><div class="line">        border-width 0px 1px 1px</div><div class="line">        transform-style preserve-3d</div><div class="line">        backface-visibility hidden</div><div class="line">        transition all .2s animate-func-bezier</div><div class="line">        transform-origin top</div><div class="line">        transform translate3d(0,0,0) scale(1,0)</div><div class="line">        max-height 180px</div><div class="line">        overflow auto</div><div class="line">        .my-select-option</div><div class="line">            display block</div><div class="line">            line-height 1.2</div><div class="line">            padding 8px</div><div class="line">            cursor pointer</div><div class="line">            transform-style preserve-3d</div><div class="line">            backface-visibility hidden</div><div class="line">            transition all .2s animate-func-bezier</div><div class="line">            @media big</div><div class="line">                &amp;:hover</div><div class="line">                    background #dadada</div><div class="line">            &amp;.selected</div><div class="line">                background #999</div><div class="line">                color #fff</div><div class="line">    &amp;.show</div><div class="line">        .my-select-options-list</div><div class="line">            transform translate3d(0,0,0) scale(1,1)</div></pre></td></tr></table></figure></p>
<p>其中/img/arrow-gray-left.svg为箭头图标，可以用样式实现，两边border，roate(45deg);<br>最终的样子如下</p>
<p><img src="/img/link-city.png" alt="link-city.png"></p>
<p>使用,如下面的省市区联动:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CityLink</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'CityLink'</span>;</div><div class="line">        <span class="keyword">this</span>.state = &#123;provinceIndex: <span class="number">0</span>, cityIndex: <span class="number">0</span>, districtIndex: <span class="number">0</span>, addressData:[]&#125;</div><div class="line">        <span class="keyword">this</span>.province = props.province || <span class="string">''</span>;</div><div class="line">        <span class="keyword">this</span>.city = props.city || <span class="string">''</span>;</div><div class="line">        <span class="keyword">this</span>.district = props.district || <span class="string">''</span>;</div><div class="line">    &#125;</div><div class="line">    componentDidMount() &#123;</div><div class="line">          Common.sendRequest(&#123;</div><div class="line">            url: Common.API_Get_Address,</div><div class="line">            success: (data) =&gt; &#123;</div><div class="line">                <span class="keyword">let</span> addr_list = [&#123;province:<span class="string">'请选择省份'</span>,citys:[&#123;city:<span class="string">'请选择城市'</span>,districts:[<span class="string">'请选择地区'</span>]&#125;]&#125;];</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> data.addr_list.china) &#123;</div><div class="line">                    <span class="keyword">let</span> citysObj = data.addr_list.china[k];</div><div class="line">                    <span class="keyword">let</span> citys = [&#123;city:<span class="string">'请选择城市'</span>,districts:[]&#125;];</div><div class="line">                    <span class="keyword">for</span>(<span class="keyword">let</span> c <span class="keyword">in</span> citysObj) &#123;</div><div class="line">                        citys.push(&#123;city:c,districts:[<span class="string">'请选择地区'</span>].concat(citysObj[c])&#125;);</div><div class="line">                    &#125;</div><div class="line">                    addr_list.push(&#123;province:k,citys:citys&#125;)</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">this</span>.setState(&#123;addressData:addr_list&#125;);</div><div class="line">                <span class="keyword">this</span>.initSetCityData(<span class="keyword">this</span>.props);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    componentWillReceiveProps(nextProps) &#123;</div><div class="line">          <span class="keyword">this</span>.initSetCityData(nextProps);</div><div class="line">    &#125;</div><div class="line">    initSetCityData(props) &#123;</div><div class="line">        <span class="keyword">if</span>(props.province) &#123;</div><div class="line">            $.each(<span class="keyword">this</span>.state.addressData,(i,province) =&gt; &#123;</div><div class="line">                <span class="keyword">if</span>(province.province == props.province) &#123;</div><div class="line">                    <span class="keyword">this</span>.state.provinceIndex = i;</div><div class="line">                    <span class="keyword">this</span>.province = props.province;</div><div class="line">                    <span class="keyword">if</span>(props.city) &#123;</div><div class="line">                        $.each(province.citys,(j,city) =&gt; &#123;</div><div class="line">                            <span class="keyword">if</span>(city.city == props.city) &#123;</div><div class="line">                                <span class="keyword">this</span>.state.cityIndex = j;</div><div class="line">                                <span class="keyword">this</span>.city = props.city;</div><div class="line">                                <span class="keyword">if</span>(props.district) &#123;</div><div class="line">                                    $.each(city.districts,(n,district) =&gt; &#123;</div><div class="line">                                        <span class="keyword">if</span>(district == props.district) &#123;</div><div class="line">                                            <span class="keyword">this</span>.state.districtIndex = n;</div><div class="line">                                            <span class="keyword">this</span>.district = district;</div><div class="line">                                            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                                        &#125;</div><div class="line">                                    &#125;);</div><div class="line">                                &#125;</div><div class="line">                                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                            &#125;</div><div class="line">                        &#125;);</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            <span class="keyword">this</span>.forceUpdate();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    onSelectChange(type,value) &#123;</div><div class="line">        <span class="keyword">if</span>(type == <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;provinceIndex: value.value, cityIndex: <span class="number">0</span>, districtIndex: <span class="number">0</span>&#125;);</div><div class="line">            <span class="keyword">this</span>.province = value.value &gt; <span class="number">0</span> ? value.label : <span class="string">''</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(type == <span class="number">2</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;cityIndex: value.value, districtIndex: <span class="number">0</span>&#125;);</div><div class="line">            <span class="keyword">this</span>.city = value.value &gt; <span class="number">0</span> ? value.label : <span class="string">''</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(type == <span class="number">3</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;districtIndex: value.value&#125;);</div><div class="line">            <span class="keyword">this</span>.district = value.value &gt; <span class="number">0</span> ? value.label : <span class="string">''</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    getChooseData() &#123;</div><div class="line">        <span class="keyword">if</span>(!<span class="keyword">this</span>.province) &#123;</div><div class="line">            Common.showToast(<span class="string">'请选择省份'</span>,<span class="string">'error'</span>);</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(!<span class="keyword">this</span>.city) &#123;</div><div class="line">            Common.showToast(<span class="string">'请选择城市'</span>,<span class="string">'error'</span>);</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(!<span class="keyword">this</span>.district) &#123;</div><div class="line">            Common.showToast(<span class="string">'请选择地区'</span>,<span class="string">'error'</span>);</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            province: <span class="keyword">this</span>.province,</div><div class="line">            city: <span class="keyword">this</span>.city,</div><div class="line">            district: <span class="keyword">this</span>.district</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    reset() &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;provinceIndex: <span class="number">0</span>, cityIndex: <span class="number">0</span> , districtIndex: <span class="number">0</span>&#125;);</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> province_list = [],city_list = [],district_list = []</div><div class="line">            ,province_index = <span class="number">0</span>,city_index = <span class="number">0</span>,district_index=<span class="number">0</span>;</div><div class="line">        <span class="keyword">this</span>.state.addressData.forEach((item,i) =&gt; &#123;</div><div class="line">            province_list.push(&#123;value: i, label: item.province&#125;);</div><div class="line">            <span class="keyword">if</span>(i == <span class="keyword">this</span>.state.provinceIndex) &#123;</div><div class="line">                item.citys.forEach((city,j) =&gt; &#123;</div><div class="line">                    city_list.push(&#123;value: j, label: city.city&#125;);</div><div class="line">                    <span class="keyword">if</span>(j == <span class="keyword">this</span>.state.cityIndex) &#123;</div><div class="line">                        city.districts.forEach((district,d) =&gt; &#123;</div><div class="line">                            district_list.push(&#123;value: d, label: district&#125;);</div><div class="line">                        &#125;);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> &lt;div className="city-link-wrap"&gt;</div><div class="line">            &lt;MySelect options=&#123;province_list&#125; index=&#123;this.state.provinceIndex&#125; onChange=&#123;this.onSelectChange.bind(this,1)&#125; /&gt;</div><div class="line">            &lt;MySelect options=&#123;city_list&#125; index=&#123;this.state.cityIndex&#125; onChange=&#123;this.onSelectChange.bind(this,2)&#125; /&gt;</div><div class="line">            &lt;MySelect options=&#123;district_list&#125; index=&#123;this.state.districtIndex&#125; onChange=&#123;this.onSelectChange.bind(this,3)&#125; /&gt;</div><div class="line">        &lt;/div&gt;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其中省市区返回的数据格式为: </p>
<p><img src="/img/address-data.png" alt="address-data.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;自定义组件&quot;&gt;&lt;a href=&quot;#自定义组件&quot; class=&quot;headerlink&quot; title=&quot;自定义组件&quot;&gt;&lt;/a&gt;自定义组件&lt;/h3&gt;&lt;p&gt;react很基本的，就是可以写各种适合自己的组件，当然github上，有很多已经可以用的，但有时候，可能找不到自己的，那就自己写吧，比如我就找了很多自定义的下拉框，在&lt;a href=&quot;https://www.npmjs.com/&quot;&gt;https://www.npmjs.com/&lt;/a&gt;上找了好久，也用了几个，但是由于他们考虑的比较全，用起来也不符合当前的设计，总是用起来不是很好，所以就自己写了一个，感觉很简单，哈哈&lt;br&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="reactjs" scheme="https://kuanglijun312.github.io/tags/reactjs/"/>
    
  </entry>
  
  <entry>
    <title>reactjs使用笔记3</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/reactjs-use-note3/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/reactjs-use-note3/</id>
    <published>2016-06-20T03:36:19.000Z</published>
    <updated>2016-09-02T03:12:56.187Z</updated>
    
    <content type="html"><![CDATA[<p>承接上面<a href="http://kuanglijun312.github.io/2016/06/20/reactjs-use-note-1/">reactjs使用笔记1</a><br>承接上面<a href="http://kuanglijun312.github.io/2016/06/20/reactjs-use-note-2/">reactjs使用笔记2</a></p>
<h3 id="3-数据更新"><a href="#3-数据更新" class="headerlink" title="3. 数据更新"></a>3. 数据更新</h3><p>数据更新可以简单的分两组，一种是自产自销，就是获取，更新，都在当前的组件，跟其他的组件不会有交互(这种少，所以使用很简单)，思路，就是定义自身的state,然后ajax获取数据后，setState即可;另外一种就是单向数据流的方式，强烈推荐!!!<br><a id="more"></a><br>例如，商品收藏:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FovarProductListWrap</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'FovarProductListWrap'</span>;</div><div class="line">        <span class="keyword">this</span>.state = &#123;list:[]&#125;;</div><div class="line">    &#125;</div><div class="line">    componentDidMount() &#123;</div><div class="line">        <span class="keyword">this</span>.loadFavorData();</div><div class="line">    &#125;</div><div class="line">    loadFavorData() &#123;</div><div class="line">        Common.sendRequest(&#123;</div><div class="line">            url: Common.API_Get_Favo_List,</div><div class="line">            params: &#123;page:<span class="string">''</span>&#125;, </div><div class="line">            success: (data) =&gt; &#123;</div><div class="line">                <span class="keyword">this</span>.setState(&#123;list:data&#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    onDeleteFavor(data) &#123;</div><div class="line">        Common.sendRequest(&#123;</div><div class="line">            url: Common.API_Edit_Favos,</div><div class="line">            params: &#123;</div><div class="line">                action_type : <span class="string">'2'</span>,</div><div class="line">                mdseinfo_id : data.mdseinfo_id</div><div class="line">            &#125;, </div><div class="line">            success: (data) =&gt; &#123;</div><div class="line">                <span class="keyword">this</span>.loadFavorData();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> &#123;cls=<span class="string">''</span>,style=&#123;&#125;&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="keyword">return</span> &lt;div className=&#123;"fovar-product-list-wrap "+cls&#125; style=&#123;style&#125;&gt;</div><div class="line">            &lt;div className="item-top-nav item-top-nav-order"&gt;</div><div class="line">                &lt;b onClick=&#123;() =&gt; &#123;myTitleTabActions.change(Common.getUrlParam('t'),'account')&#125;&#125;&gt;返回&lt;/b&gt;&lt;i&gt;我的收藏&lt;/i&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">            &#123;this.state.list.map((item,i) =&gt; &#123;</div><div class="line">                return &lt;ul className="favor-list-content-wrap" key=&#123;"favor-"+i&#125;&gt;</div><div class="line">                            &lt;li className="item-img item"&gt;&lt;a href=&#123;"/product?id="+item.mdseinfo_id&#125;&gt;&lt;CropImg src=&#123;item.artwork_img_url_s&#125; width="100"/&gt;&lt;/a&gt;&lt;/li&gt;</div><div class="line">                            &lt;li className="item-name item item-small"&gt;&lt;div&gt;&#123;item.mdse_type_name&#125;&lt;i&gt;&lt;/i&gt;价格: ￥&#123;item.mdseattr_first_price&#125;&lt;/div&gt;&lt;/li&gt;</div><div class="line">                            &lt;li className="item-action item f-r"&gt;&lt;MyButtonNoBorder title="删除" onClick=&#123;() =&gt; &#123;this.onDeleteFavor(item)&#125;&#125; /&gt;&lt;/li&gt;</div><div class="line">                        &lt;/ul&gt;</div><div class="line">            &#125;)&#125;</div><div class="line">        &lt;/div&gt;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>比如以上例子的state.list，就可以了;</p>
<p>另外一种就是有交互的了，这种情况又可以分两种(当然第一种不推荐),第一种，调用者和被调用者互相引用，这样就可以互相调用了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;MobileHeaderInfo parent=&#123;<span class="keyword">this</span>&#125; ref=&#123;(c) =&gt; <span class="keyword">this</span>.mobileHeaderInfoCmp = c&#125;/&gt;</div></pre></td></tr></table></figure></p>
<p>这样使用该处代码的地方，就用this.mobileHeaderInfoCmp，去调用MobileHeaderInfo组件里的方法； 而在MobileHeaderInfo组件里，就可以用this.props.parent，去调用使用者的方法；<br>很明显，缺点很多，需要定义太多东西了，而且耦合性太强了，干扰太多，所以非常不推荐;</p>
<h3 id="单向数据流-–-正确的数据交换方式"><a href="#单向数据流-–-正确的数据交换方式" class="headerlink" title="单向数据流 – 正确的数据交换方式"></a>单向数据流 – 正确的数据交换方式</h3><p>单向数据流的思想，就跟它的名字一样，一个操作，改变变量(state)，再由state的变化去更新view;而不是在操作中，直接更改view，所有view的变化，都需要导致state的变化，state的变化才会导致view的变化！ flux，相关的实现思路很多，其中最牛的是Redux;它不仅仅跟react的flux是思路相似，而且他也不只用于react；参考<a href="http://redux.js.org/" target="_blank" rel="external">http://redux.js.org/</a>; 难点，就是需要对它比较深入的了解，它用的很新(比如es6的很多技术), 前期，由于时间原因，在该项目没有用这个，用了一个更简单的flux技术,即refluxjs(<a href="https://github.com/reflux/refluxjs" target="_blank" rel="external">https://github.com/reflux/refluxjs</a>),它消灭了providor,就是分发部分，直接view跟store关联; 相关使用可以在github上的技术;我在这里说明下自己的使用的情况;<br>最基本的，调用actions去改变数据，再trigger:<br>demo，面包条的实现<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Breadcrumbs</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'Breadcrumbs'</span>;</div><div class="line">        <span class="keyword">this</span>.state = &#123;list :[&#123;text:<span class="string">'首页'</span>,href:<span class="string">'/'</span>&#125;].concat(props.list)&#125;;</div><div class="line">        <span class="keyword">this</span>.listenTo(myBreadcrumbsStore, <span class="keyword">this</span>.onStateChange);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    onStateChange(list) &#123;</div><div class="line">        list.unshift(&#123;text:<span class="string">'首页'</span>,href:<span class="string">'/'</span>&#125;);</div><div class="line">        <span class="keyword">this</span>.setState(&#123;list:list&#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">breadcrumbs-wrap</span> "+<span class="attr">this.props.cls</span>&#125;&gt;</span></span></div><div class="line">            &#123;this.state.list.map((item,i) =&gt; &#123;</div><div class="line">                return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;</span>"<span class="attr">link-</span>"+<span class="attr">i</span>&#125;&gt;</span>&#123;item.href ? <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;item.href&#125;</span> &gt;</span>&#123;item.text&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> : <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;item.text&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">            &#125;)&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">Breadcrumbs.defaultProps = &#123;cls:<span class="string">''</span>,list:[]&#125;;</div><div class="line">ReactMixin.onClass(Breadcrumbs, Reflux.ListenerMixin);</div></pre></td></tr></table></figure></p>
<p>其中myBreadcrumbsStore, myBreadcrumbsActions;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//面包条的store</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">let</span> myBreadcrumbsActions = Reflux.createActions([<span class="string">'render'</span>]);</div><div class="line"><span class="keyword">export</span> <span class="keyword">let</span> myBreadcrumbsStore = Reflux.createStore(&#123;</div><div class="line">    listenables: myBreadcrumbsActions,</div><div class="line">    onRender: <span class="function"><span class="keyword">function</span>(<span class="params">list</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.trigger(list);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>调用:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">myBreadcrumbsActions.render([&#123;text:<span class="string">'个人中心'</span>,href:<span class="string">'/myinfo'</span>&#125;,&#123;text:<span class="string">'好友列表'</span>,href:<span class="string">'/myinfo#t=2'</span>&#125;,</div><div class="line">                        &#123;text:<span class="string">'某某'</span>,href:<span class="string">'/friend?id='</span>+data.artwork_auth_usr_id&#125;,&#123;text:data.artwork_title&#125;]);</div></pre></td></tr></table></figure></p>
<p>代码思路简单说明下: 如果发生操作，就调用myBreadcrumbsActions.render，去通知action，之后myBreadcrumbsStore在onRender，接受操作，并且触发改变状态, 这样所有监听myBreadcrumbsStore的组件在监听函数都会调用，比如Breadcrumbs的onStateChange的方法，这这个方法里，更改setState，即组件的state的改变，这样react会去重新render界面，整个过程完成!</p>
<p>如果遇到好几个组件都绑定同一个store,但我只需要改其中一个组件响应怎么办？<br>这种情况reflux没有去处理，因为它做的部分，就是组件绑定了该store，就应该受到响应，但我们可以自己去处理，比如trigger的时候加一个type参数。<br>例如显示弹出框:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// pop show action</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">let</span> myPopActions = Reflux.createActions([<span class="string">"showPopup"</span>,<span class="string">"hidePopup"</span>]);</div><div class="line"><span class="keyword">export</span> <span class="keyword">let</span> myPopStore = Reflux.createStore(&#123;</div><div class="line">    listenables: myPopActions,</div><div class="line">    onShowPopup: <span class="function"><span class="keyword">function</span>(<span class="params">type,data</span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.trigger(<span class="number">1</span>,type,data) <span class="comment">//show</span></div><div class="line">    &#125;,</div><div class="line">    onHidePopup: <span class="function"><span class="keyword">function</span>(<span class="params">type,data</span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.trigger(<span class="number">0</span>, type) <span class="comment">//hide</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>其中的trigger，加了一个type,这样在不同的组件去判断就ok，比如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">PopupInfo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.state = &#123;popshow:<span class="number">0</span>,text:<span class="string">''</span>&#125;</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'PopupInfo'</span>;</div><div class="line">        <span class="keyword">this</span>.type = <span class="string">'info'</span>;</div><div class="line">        <span class="keyword">this</span>.listenTo(myPopStore, <span class="keyword">this</span>.onShowStateChange)</div><div class="line">    &#125;</div><div class="line">    onShowStateChange(show,type,text) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.type == type) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;popshow:show,text:text&#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">MaskWrap</span> <span class="attr">popshow</span>=<span class="string">&#123;this.state.popshow&#125;</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"info-popup-wrap mask-content"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">MaskClose</span> <span class="attr">onClick</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;myPopActions.hidePopup(this.type)&#125;&#125;/&gt;</div><div class="line">                    <span class="tag">&lt;<span class="name">p</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">this.state.text</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">MaskWrap</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">ReactMixin.onClass(PopupInfo, Reflux.ListenerMixin);</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;承接上面&lt;a href=&quot;http://kuanglijun312.github.io/2016/06/20/reactjs-use-note-1/&quot;&gt;reactjs使用笔记1&lt;/a&gt;&lt;br&gt;承接上面&lt;a href=&quot;http://kuanglijun312.github.io/2016/06/20/reactjs-use-note-2/&quot;&gt;reactjs使用笔记2&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-数据更新&quot;&gt;&lt;a href=&quot;#3-数据更新&quot; class=&quot;headerlink&quot; title=&quot;3. 数据更新&quot;&gt;&lt;/a&gt;3. 数据更新&lt;/h3&gt;&lt;p&gt;数据更新可以简单的分两组，一种是自产自销，就是获取，更新，都在当前的组件，跟其他的组件不会有交互(这种少，所以使用很简单)，思路，就是定义自身的state,然后ajax获取数据后，setState即可;另外一种就是单向数据流的方式，强烈推荐!!!&lt;br&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="reactjs" scheme="https://kuanglijun312.github.io/tags/reactjs/"/>
    
  </entry>
  
  <entry>
    <title>reactjs使用笔记2</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/reactjs-use-note-2/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/reactjs-use-note-2/</id>
    <published>2016-06-20T03:06:19.000Z</published>
    <updated>2016-09-02T03:12:56.186Z</updated>
    
    <content type="html"><![CDATA[<p>承接上面<a href="http://kuanglijun312.github.io/2016/06/20/reactjs-use-note-1/">reactjs使用笔记1</a></p>
<h3 id="2-表单的相关使用"><a href="#2-表单的相关使用" class="headerlink" title="2. 表单的相关使用"></a>2. 表单的相关使用</h3><p>表单是必不可少，往往需要验证；<br><a id="more"></a><br>比如输入框:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMaterialInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'MyMaterialInput'</span>;</div><div class="line">    &#125;</div><div class="line">    getValue() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.input.value;</div><div class="line">    &#125;</div><div class="line">    getInput() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.input;</div><div class="line">    &#125;</div><div class="line">    setValue(value) &#123;</div><div class="line">        <span class="keyword">this</span>.input.value = value;</div><div class="line">    &#125;</div><div class="line">    componentWillReceiveProps(nextProps) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> nextProps.value != <span class="string">'undefined'</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.input.value = nextProps.value;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    componentDidUpdate(prevProps, prevState) &#123;</div><div class="line">    &#125;</div><div class="line">    focus() &#123;</div><div class="line">        <span class="keyword">this</span>.input.focus();</div><div class="line">    &#125;</div><div class="line">    checkValid() &#123;</div><div class="line">        <span class="keyword">let</span> el = $(<span class="keyword">this</span>.input);</div><div class="line">        <span class="keyword">let</span> validate = el.data(<span class="string">'validate'</span>);</div><div class="line">        <span class="keyword">let</span> isPass = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">if</span>(validate) &#123;</div><div class="line">            <span class="keyword">if</span>(validate == <span class="string">'equal'</span>) &#123;</div><div class="line">                isPass = el.val() == $(<span class="string">'#'</span>+el.data(<span class="string">'linkid'</span>)).val();</div><div class="line">                <span class="keyword">if</span>(!isPass &amp;&amp; el.data(<span class="string">'errmsg'</span>)) Common.showToast(el.data(<span class="string">'errmsg'</span>),<span class="string">'error'</span>);</div><div class="line">                <span class="keyword">return</span> isPass;</div><div class="line">            &#125;</div><div class="line">            isPass = Common.validate(validate,el.val());</div><div class="line">            <span class="keyword">if</span>(!isPass) &#123;</div><div class="line">                <span class="keyword">if</span>(el.data(<span class="string">'errmsg'</span>)) Common.showToast(el.data(<span class="string">'errmsg'</span>),<span class="string">'error'</span>);</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> isPass;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> &#123;label,type=<span class="string">'text'</span>,value=<span class="string">''</span>,cls=<span class="string">''</span>,...attr&#125; = <span class="keyword">this</span>.props</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">material-input-wrap</span> "+<span class="attr">cls</span>&#125;&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">className</span>=<span class="string">"input-content"</span> <span class="attr">ref</span>=<span class="string">&#123;(ref)</span> =&gt;</span> this.input = ref&#125; type=&#123;type&#125; </div><div class="line">                    defaultValue=&#123;value&#125; &#123;...attr&#125; data-validate=&#123;attr.validate&#125; onChange=&#123;(e) =&gt; &#123;this.props.onChange &amp;&amp; this.props.onChange(e,this)&#125;&#125; </div><div class="line">                    data-errmsg=&#123;attr.errmsg&#125; data-linkid=&#123;attr.linkid&#125; required/&gt; </div><div class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">className</span>=<span class="string">"input-label"</span>&gt;</span>&#123;label&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">MyMaterialInput.defaultProps = &#123;type:<span class="string">'text'</span>,label:<span class="string">''</span>,validate:<span class="string">''</span>,errmsg:<span class="string">''</span>&#125;</div></pre></td></tr></table></figure></p>
<p>以上的代码是自定义的一个input(样式参考<a href="https://codepen.io/sevilayha/pen/IdGKH" target="_blank" rel="external">Google Material Design Input Boxes</a>);其中对<input>标签，加了验证的dataset;<br>下面的是Form的实现：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MyForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'MyForm'</span>;</div><div class="line">    &#125;</div><div class="line">    onSubmit() &#123;</div><div class="line">        <span class="keyword">var</span> frm = <span class="keyword">this</span>.refs.myform;</div><div class="line">        <span class="keyword">var</span> isPass = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">var</span> formdata = &#123;&#125;;</div><div class="line">        $(<span class="string">'input,textarea'</span>,frm).each(<span class="function"><span class="keyword">function</span>(<span class="params">i,input</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span>(input.name == <span class="string">''</span>) <span class="keyword">return</span>;</div><div class="line">            <span class="keyword">let</span> el = $(input);</div><div class="line">            <span class="keyword">let</span> validate = el.data(<span class="string">'validate'</span>);</div><div class="line">            <span class="keyword">if</span>(validate) &#123;</div><div class="line">                <span class="keyword">if</span>(validate == <span class="string">'equal'</span>) &#123;</div><div class="line">                    isPass = el.val() == $(<span class="string">'#'</span>+el.data(<span class="string">'linkid'</span>)).val();</div><div class="line">                    <span class="keyword">if</span>(!isPass &amp;&amp; el.data(<span class="string">'errmsg'</span>)) Common.showToast(el.data(<span class="string">'errmsg'</span>),<span class="string">'error'</span>);</div><div class="line">                    <span class="keyword">return</span> isPass;</div><div class="line">                &#125;</div><div class="line">                isPass = Common.validate(validate,el.val());</div><div class="line">                <span class="keyword">if</span>(!isPass) &#123;</div><div class="line">                    <span class="keyword">if</span>(el.data(<span class="string">'errmsg'</span>)) Common.showToast(el.data(<span class="string">'errmsg'</span>),<span class="string">'error'</span>);</div><div class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(input.type == <span class="string">'radio'</span> || input.type == <span class="string">'checkbox'</span>) &#123;</div><div class="line">                <span class="keyword">if</span>(input.checked) &#123;</div><div class="line">                    formdata[input.name] = input.value;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                formdata[input.name] = el.val();</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">if</span>(isPass) &#123;</div><div class="line">            <span class="keyword">this</span>.props.onSubmit(frm,formdata);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    reset() &#123;</div><div class="line">        <span class="keyword">this</span>.refs.myform.reset();</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> &#123;cls=<span class="string">''</span>&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">my-form-wrap</span> "+<span class="attr">cls</span>&#125; <span class="attr">method</span>=<span class="string">"POST"</span> &#123;<span class="attr">...this.props</span>&#125; <span class="attr">ref</span>=<span class="string">"myform"</span> <span class="attr">onSubmit</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;e.preventDefault();this.onSubmit();&#125;&#125;</span></div><div class="line">             noValidate&gt;&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">form</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">MyForm.defaultProps = &#123;onSubmit:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;&#125;;</div></pre></td></tr></table></figure></p>
<p>取消默认的form提交，就是在onSubmit中return false;(这里需要注意在reactjs的事件，驼峰法);上面的思想，注意是获取input,textarea的值，验证是否合法，最后在调用使用地方的props定义的onSubmit方法，见如下使用:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;MyForm action=&#123;Common.API_Login&#125; onSubmit=&#123;<span class="keyword">this</span>.onLoginSubmit.bind(<span class="keyword">this</span>)&#125;&gt;</div><div class="line">    &lt;MyMaterialInput type="tel" label="请输入手机号" name="phone" validate="phone" errmsg="手机号码不正确"/&gt;</div><div class="line">    &lt;MyMaterialInput type="password" label="请输入密码" name="password" validate="required" errmsg="密码不能为空"/&gt;</div><div class="line">    &lt;div className="action-login"&gt;&lt;MyButton title="登录"/&gt;&lt;/div&gt;</div><div class="line">    &lt;div className="action-forgot"&gt;&lt;MyButtonNoBorder title="忘记密码" type="button" href="/findpassword"/&gt;&lt;/div&gt;</div><div class="line">&lt;/MyForm&gt;</div></pre></td></tr></table></figure></p>
<p>另外附上checkbox,radio的代码:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCheckbox</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'MyCheckbox'</span>;</div><div class="line">        <span class="keyword">this</span>.state = &#123;checked : props.checked&#125;;</div><div class="line">    &#125;</div><div class="line">    componentWillReceiveProps(nextProps) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state.checked != nextProps.checked) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;checked:nextProps.checked&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    toggleChange() &#123;</div><div class="line">        <span class="keyword">if</span>(!<span class="keyword">this</span>.input.disabled) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;checked:!<span class="keyword">this</span>.input.checked&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    onChange(e) &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;checked: e.target.checked&#125;);</div><div class="line">        <span class="keyword">this</span>.props.onChange &amp;&amp; <span class="keyword">this</span>.props.onChange(e.target.checked,e,<span class="keyword">this</span>.input);</div><div class="line">    &#125;</div><div class="line">    isChecked() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.input.checked;</div><div class="line">    &#125;</div><div class="line">    getValue() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.input.value;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> &#123;label, checked = <span class="literal">false</span>, ...attr&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">className</span>=<span class="string">"checkbox-wrap"</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">className</span>=<span class="string">"input-checkbox"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> &#123;<span class="attr">...attr</span>&#125; </span></div><div class="line">                    <span class="attr">ref</span> = <span class="string">&#123;(c)</span> =&gt; this.input = c&#125;</div><div class="line">                    checked=&#123;this.state.checked&#125; </div><div class="line">                    onChange=&#123;this.onChange.bind(this)&#125;/&gt;</div><div class="line">                <span class="tag">&lt;<span class="name">em</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">label</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRadio</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'MyRadio'</span>;</div><div class="line">        <span class="keyword">this</span>.state = &#123;checked : props.checked&#125;;</div><div class="line">    &#125;</div><div class="line">    componentWillReceiveProps(nextProps) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.state.checked != nextProps.checked) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;checked:nextProps.checked&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    onChange(e) &#123;</div><div class="line">        <span class="keyword">this</span>.props.onChange &amp;&amp; <span class="keyword">this</span>.props.onChange(e.target.checked,e,<span class="keyword">this</span>.input);</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> &#123;label, checked, cls=<span class="string">''</span>, ...attr&#125; = <span class="keyword">this</span>.props</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">radio-wrap</span> " +<span class="attr">cls</span>&#125;&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">className</span>=<span class="string">"input-radio"</span> <span class="attr">type</span>=<span class="string">"radio"</span> &#123;<span class="attr">...attr</span>&#125; </span></div><div class="line">                    <span class="attr">ref</span> = <span class="string">&#123;(c)</span> =&gt; this.input = c&#125;</div><div class="line">                    checked=&#123;this.state.checked&#125; </div><div class="line">                    onChange=&#123;this.onChange.bind(this)&#125;/&gt;</div><div class="line">                <span class="tag">&lt;<span class="name">em</span>&gt;</span>&#123;label&#125;<span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;承接上面&lt;a href=&quot;http://kuanglijun312.github.io/2016/06/20/reactjs-use-note-1/&quot;&gt;reactjs使用笔记1&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-表单的相关使用&quot;&gt;&lt;a href=&quot;#2-表单的相关使用&quot; class=&quot;headerlink&quot; title=&quot;2. 表单的相关使用&quot;&gt;&lt;/a&gt;2. 表单的相关使用&lt;/h3&gt;&lt;p&gt;表单是必不可少，往往需要验证；&lt;br&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="reactjs" scheme="https://kuanglijun312.github.io/tags/reactjs/"/>
    
  </entry>
  
  <entry>
    <title>reactjs使用笔记1</title>
    <link href="https://kuanglijun312.github.io/2016/06/20/reactjs-use-note-1/"/>
    <id>https://kuanglijun312.github.io/2016/06/20/reactjs-use-note-1/</id>
    <published>2016-06-20T02:26:19.000Z</published>
    <updated>2016-09-02T03:12:56.186Z</updated>
    
    <content type="html"><![CDATA[<p>#reactjs简介<br>facebook出品,官网(<a href="https://facebook.github.io/react/" target="_blank" rel="external">https://facebook.github.io/react/</a>),中文(<a href="http://reactjs.cn/" target="_blank" rel="external">http://reactjs.cn/</a>);<br>特点： UI框架(一个一个的view，即组件)，虚拟dom，单向数据流;</p>
<p>自我感觉，reactjs，第一个让开发者注重开发一个一个的view,用于共用(模块化思想),比如你顶一个RedButton的组件，别的地方,import，就可以用；<br>第二个数据展示,不管你如果改，最终在render函数里改,你可以在render的函数里，写很多判断，最终它都会用他高效的虚拟dom去更新真实的dom；<br>第三个动画问题，用的是虚拟dom，动画其实比较麻烦，比如你定义一个class的state，根据逻辑去更新这个class的值，如果动画很多，就会需要很多这种变量，所以react提供了ref，来引用真实的dom，这样你可以用jquery，或者纯js去更新class；但这种方式，估计react也不是很推荐，所以看个人情况开发使用;</p>
<a id="more"></a>
<h3 id="reactjs使用中遇到的情况"><a href="#reactjs使用中遇到的情况" class="headerlink" title="reactjs使用中遇到的情况"></a>reactjs使用中遇到的情况</h3><p>简单的demo，请看官网;</p>
<h3 id="1-什么时候用state-props"><a href="#1-什么时候用state-props" class="headerlink" title="1, 什么时候用state,props;"></a>1, 什么时候用state,props;</h3><p>简单的来说state，就是在有变化的，影响view的显示的，都需要用state,(不影响界面的，可以用this.attribute这种属性记录值)；props，主要在使用传递的值，或者一些不变的值；<br>举一两个自己写的组件:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MyButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'MyButton'</span>;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.props.href) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">a</span>  <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">btn-red</span> "+<span class="attr">this.props.cls</span>&#125; &#123;<span class="attr">...this.props</span>&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.props.onClick()&#125;&gt;&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">btn-red</span> "+<span class="attr">this.props.cls</span>&#125; &#123;<span class="attr">...this.props</span>&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.props.onClick()&#125;&gt;&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">MyButton.defaultProps = &#123;onClick:()=&gt;&#123;&#125;,cls:<span class="string">''</span>&#125;</div></pre></td></tr></table></figure>
<p>这是一个自定义的button，其中基本没有用state(其实可以用，因为title是可以让变化的)，其中title有引用的地方传入,href也是，使用如下:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;MyButton title=<span class="string">"立即购买"</span> onClick=&#123;() =&gt; &#123; <span class="keyword">this</span>.makeOrder(); &#125;&#125;/&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">MyButton</span> <span class="attr">title</span>=<span class="string">"帮助"</span> <span class="attr">href</span>=<span class="string">"/help"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>/&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>看一个使用state的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MyButtonNoBorder</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.displayName = <span class="string">'MyButtonNoBorder'</span>;</div><div class="line">        <span class="keyword">this</span>.state = &#123;enabled: <span class="literal">true</span>,title:props.title||<span class="string">''</span>&#125;</div><div class="line">    &#125;</div><div class="line">    setDisabled(disabled) &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;enabled:!disabled&#125;);</div><div class="line">    &#125;</div><div class="line">    setTitle(title) &#123;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;title:title&#125;);</div><div class="line">    &#125;</div><div class="line">    componentWillUpdate(nextProps, nextState) &#123;</div><div class="line">        <span class="keyword">if</span>(nextProps.title != <span class="keyword">this</span>.state.title) &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;title: nextProps.title&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> enabled = <span class="keyword">this</span>.state.enabled;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.props.href) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">a</span>  <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">btn-noborder</span> "+(<span class="attr">enabled</span> ? '<span class="attr">enabled</span> ' <span class="attr">:</span> '<span class="attr">disabled</span> ')+<span class="attr">this.props.cls</span>&#125; &#123;<span class="attr">...this.props</span>&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;if(enabled) this.state.onClick()&#125;&#125; &gt;&#123;this.props.title&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>"<span class="attr">btn-noborder</span> "+(<span class="attr">enabled</span> ? '<span class="attr">enabled</span> ' <span class="attr">:</span> '<span class="attr">disabled</span> ')+<span class="attr">this.props.cls</span>&#125; &#123;<span class="attr">...this.props</span>&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;if(enabled) this.props.onClick()&#125;&#125; &gt;&#123;this.state.title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">MyButtonNoBorder.defaultProps = &#123;onClick:()=&gt;&#123;&#125;,cls:<span class="string">''</span>&#125;</div></pre></td></tr></table></figure>
<p>也是一个button，这个button其实独立出来，是因为样式不一样，比如有些不同，可以跟上面的整合，可以传不同的props来区分就ok; 我在使用中，分开，主要是考虑相互独立，干扰少点，设计变了，也好修改； 上面的代码，就对title，当做的state，这样调用它的ref，使用setTitle，就可以修改标题;由于title还是经常在使用的地方修改,比如使用的地方title在某一个操作后，改文字了，即新的props的title值不一样，所以需要实现componentWillUpdate，如果不一致，需要修改state；</p>
<p>比如下面一个新的组件，发送验证码的组件:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCodeButton</span> <span class="keyword">extends</span> <span class="title">MyButtonNoBorder</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(props) &#123;</div><div class="line">        <span class="keyword">super</span>(props);</div><div class="line">        <span class="keyword">this</span>.clearIntervalId = <span class="number">0</span>;</div><div class="line">        <span class="keyword">this</span>.countNumber = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    startCount() &#123;</div><div class="line">        <span class="keyword">this</span>.setDisabled(<span class="literal">true</span>);</div><div class="line">        <span class="keyword">this</span>.countNumber = <span class="number">60</span>;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.clearIntervalId) &#123;</div><div class="line">            clearInterval(<span class="keyword">this</span>.clearIntervalId);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.setTitle(<span class="string">'重新获取('</span>+<span class="keyword">this</span>.countNumber+<span class="string">')'</span>);</div><div class="line">        <span class="keyword">this</span>.clearIntervalId = setInterval(()=&gt;&#123;</div><div class="line">            <span class="keyword">this</span>.countNumber--;</div><div class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.countNumber &lt;= <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.setDisabled(<span class="literal">false</span>);</div><div class="line">                <span class="keyword">this</span>.setTitle(<span class="keyword">this</span>.props.title);</div><div class="line">                clearInterval(<span class="keyword">this</span>.clearIntervalId);</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">this</span>.setTitle(<span class="string">'重新获取('</span>+<span class="keyword">this</span>.countNumber+<span class="string">')'</span>)</div><div class="line">        &#125;,<span class="number">1000</span>);</div><div class="line">    &#125;</div><div class="line">    componentWillUnmount() &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.clearIntervalId) &#123;</div><div class="line">            clearInterval(<span class="keyword">this</span>.clearIntervalId);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;MyCodeButton title=<span class="string">"获取验证码"</span> ref=&#123;(c) =&gt; <span class="keyword">this</span>.codeButton = c&#125; onClick=&#123;<span class="keyword">this</span>.onSendCode.bind(<span class="keyword">this</span>)&#125; /&gt;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;#reactjs简介&lt;br&gt;facebook出品,官网(&lt;a href=&quot;https://facebook.github.io/react/&quot;&gt;https://facebook.github.io/react/&lt;/a&gt;),中文(&lt;a href=&quot;http://reactjs.cn/&quot;&gt;http://reactjs.cn/&lt;/a&gt;);&lt;br&gt;特点： UI框架(一个一个的view，即组件)，虚拟dom，单向数据流;&lt;/p&gt;
&lt;p&gt;自我感觉，reactjs，第一个让开发者注重开发一个一个的view,用于共用(模块化思想),比如你顶一个RedButton的组件，别的地方,import，就可以用；&lt;br&gt;第二个数据展示,不管你如果改，最终在render函数里改,你可以在render的函数里，写很多判断，最终它都会用他高效的虚拟dom去更新真实的dom；&lt;br&gt;第三个动画问题，用的是虚拟dom，动画其实比较麻烦，比如你定义一个class的state，根据逻辑去更新这个class的值，如果动画很多，就会需要很多这种变量，所以react提供了ref，来引用真实的dom，这样你可以用jquery，或者纯js去更新class；但这种方式，估计react也不是很推荐，所以看个人情况开发使用;&lt;/p&gt;
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="reactjs" scheme="https://kuanglijun312.github.io/tags/reactjs/"/>
    
  </entry>
  
  <entry>
    <title>ssh远程登录服务器</title>
    <link href="https://kuanglijun312.github.io/2016/04/18/ssh-remote-login/"/>
    <id>https://kuanglijun312.github.io/2016/04/18/ssh-remote-login/</id>
    <published>2016-04-18T02:06:57.000Z</published>
    <updated>2016-09-02T03:12:56.187Z</updated>
    
    <content type="html"><![CDATA[<h3 id="在mac或者Linux上登录"><a href="#在mac或者Linux上登录" class="headerlink" title="在mac或者Linux上登录"></a>在mac或者Linux上登录</h3><p>使用以下命令:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -p 22 username@111.13.101.208</div></pre></td></tr></table></figure></p>
<p>其中 22 是端口号(可以更改的，如果没有修改端口号，可以不输入-p 22),请替换对应的端口号, 111.13.101.208是对应的ip;<br>输入密码即可登录</p>
<h3 id="免密码登录"><a href="#免密码登录" class="headerlink" title="免密码登录"></a>免密码登录</h3><ol>
<li><p>本机电脑<br> 需要生产ssh-keychain; 检查 ~/.ssh 是否存在，不存在，使用以下命令生成</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa</div></pre></td></tr></table></figure>
<p> 其中提示输入密码，可以输入空，当然可以输入别的，之后在 个人目录 ~ 下，就会生产.ssh文件夹，里面会有id_rsa  id_rsa.pub ,对应私钥, 公钥，其中id_rsa.pub使我们需要的;复制id_rsa.pub里的内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat id_rsa.pub</div></pre></td></tr></table></figure>
</li>
</ol>
<p>复制内容；</p>
<ol>
<li>配置服务器<br>  先登录上服务器; 编辑 服务器的 ~/.ssh/auth_key  （其中auth_key可能不是这个名字，可以修改，在对应的ssh的配置文件中）<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi ~/.ssh/auth_key</div></pre></td></tr></table></figure>
</li>
</ol>
<p>添加本机id_rsa.pub的内容，即可；<br>这样就可以<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -p 22 username@111.13.101.208</div></pre></td></tr></table></figure></p>
<p>不需要密码登录了</p>
<ol>
<li><p>快捷登录方式<br> 以上密码还需要输入ip，有时候还需要输入端口，太长了，也不好记；便可以自定义名字；<br> 本机电脑: 在 ~/.ssh/ 目录下 新建 config 文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi ~/.ssh/config</div></pre></td></tr></table></figure>
<p> 输入以下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Host custom-name</div><div class="line">    HostName ip</div><div class="line">    User username</div><div class="line">    Port 22</div></pre></td></tr></table></figure>
</li>
</ol>
<p>其中 custom-name 自定义的文件，比如 208 , home 等任何合法的字符都可以<br>ip 即对于的ip地址<br>username 即登录的用户名<br>22 就是端口号，默认端口可以不配置<br>配置好以上，可以使用以下命令登录(以Host为 208 为例)<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh 208</div></pre></td></tr></table></figure></p>
<p>即可以登录到服务器了</p>
<p>以上是mac或者linux上</p>
<h3 id="windows上，需要安装软件"><a href="#windows上，需要安装软件" class="headerlink" title="windows上，需要安装软件"></a>windows上，需要安装软件</h3><p><a href="http://www.putty.org/" target="_blank" rel="external">PuTTY</a>, 或者<br><a href="http://www.htpcbeginner.com/best-ssh-clients-windows-putty-alternatives/2/" target="_blank" rel="external">10 best SSH Clients for Windows: free alternatives to PuTTY</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;在mac或者Linux上登录&quot;&gt;&lt;a href=&quot;#在mac或者Linux上登录&quot; class=&quot;headerlink&quot; title=&quot;在mac或者Linux上登录&quot;&gt;&lt;/a&gt;在mac或者Linux上登录&lt;/h3&gt;&lt;p&gt;使用以下命令:&lt;br&gt;&lt;figure cla
    
    </summary>
    
    
      <category term="ssh" scheme="https://kuanglijun312.github.io/tags/ssh/"/>
    
      <category term="server" scheme="https://kuanglijun312.github.io/tags/server/"/>
    
      <category term="linux" scheme="https://kuanglijun312.github.io/tags/linux/"/>
    
      <category term="mac" scheme="https://kuanglijun312.github.io/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>es6笔记</title>
    <link href="https://kuanglijun312.github.io/2016/04/08/es6/"/>
    <id>https://kuanglijun312.github.io/2016/04/08/es6/</id>
    <published>2016-04-08T01:50:13.000Z</published>
    <updated>2016-09-02T03:12:56.185Z</updated>
    
    <content type="html"><![CDATA[<p>不知不觉es7都要出来了… es6 也就是 es2015(因为2015年推出,react已同步支持了)</p>
<p>ps: es6出乎你的想象，新语法，晕晕晕晕晕晕晕晕晕晕晕晕</p>
<p>自己去看吧… 说的非常详细,js基础不好的，慢慢看吧<br><a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">ECMAScript 6 入门</a></p>
<p>###基本介绍<br>babel支持转es5; 需要配置 .babelrc; (presets定义转码规则,比如es2015,react,stage-2);</p>
<p>babel工具: 命令行转码 – babel-cli; 安装<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="selector-tag">i</span> -g babel-cli</div></pre></td></tr></table></figure></p>
<p>babel-node: terminal端命令，可写es6代码</p>
<p>##相关语法</p>
<ol>
<li><p>let 局部变量,只在代码块里有效，注意块级作用域<br> 闭包比如for;</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [];</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">  a[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(i);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">a[<span class="number">6</span>](); <span class="comment">// 6</span></div></pre></td></tr></table></figure>
</li>
<li><p>const – 定义常量</p>
</li>
<li>解构赋值<br> demo: var [a,b,c] = [1,2,3];let [a=1,…b] = [1,2,3,4]</li>
</ol>
<p>ps：太多了………</p>
<p>记一些特殊的吧…</p>
<ol>
<li>类数组对象： 本质特征只有一点，即必须有length属性;</li>
<li>33</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;不知不觉es7都要出来了… es6 也就是 es2015(因为2015年推出,react已同步支持了)&lt;/p&gt;
&lt;p&gt;ps: es6出乎你的想象，新语法，晕晕晕晕晕晕晕晕晕晕晕晕&lt;/p&gt;
&lt;p&gt;自己去看吧… 说的非常详细,js基础不好的，慢慢看吧&lt;br&gt;&lt;a href=&quot;h
    
    </summary>
    
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="es6" scheme="https://kuanglijun312.github.io/tags/es6/"/>
    
      <category term="javascript" scheme="https://kuanglijun312.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>nodejs-express-react-webpack-stylus-序</title>
    <link href="https://kuanglijun312.github.io/2016/04/06/nodejs-express-react-webpack-stylus-00/"/>
    <id>https://kuanglijun312.github.io/2016/04/06/nodejs-express-react-webpack-stylus-00/</id>
    <published>2016-04-06T03:41:08.000Z</published>
    <updated>2016-09-02T03:12:56.186Z</updated>
    
    <content type="html"><![CDATA[<p>前端技术更新太快，自己几年未长进，惭愧… </p>
<h2 id="now-start"><a href="#now-start" class="headerlink" title="now start!!"></a>now start!!</h2><p>nodejs太重要了，不熟悉的赶紧学吧…什么gulp,grunt,webpack,stylus等等等都相关。</p>
<p>ps: es6,只能呵呵，也是赶紧学</p>
<p>先介绍下webpack吧 – ps:热启动太棒了!!!</p>
<p>用于打包，管理等等，详细参考<a href="https://fakefish.github.io/react-webpack-cookbook/" target="_blank" rel="external">webpack学习</a>,<a href="https://github.com/webpack/webpack" target="_blank" rel="external">webpack</a></p>
<p>下面主要根据 <a href="https://fakefish.github.io/react-webpack-cookbook/" target="_blank" rel="external">https://fakefish.github.io/react-webpack-cookbook/</a> 的文章记录笔记;</p>
<p><a href="https://fakefish.github.io/react-webpack-cookbook/Configuring-react-js.html" target="_blank" rel="external">https://fakefish.github.io/react-webpack-cookbook/Configuring-react-js.html</a> 此处，由于使用了es6,所以需要添加<br><figure class="highlight plain"><figcaption><span>install babel-preset-es2015 --save-dev```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">```npm install babel-preset-react --save-dev</div></pre></td></tr></table></figure></p>
<p>参考: <a href="http://stackoverflow.com/questions/33460420/babel-loader-jsx-syntaxerror-unexpected-token" target="_blank" rel="external">http://stackoverflow.com/questions/33460420/babel-loader-jsx-syntaxerror-unexpected-token</a>; <a href="http://stackoverflow.com/questions/33509770/react-babel-webpack-not-parsing-jsx-code" target="_blank" rel="external">http://stackoverflow.com/questions/33509770/react-babel-webpack-not-parsing-jsx-code</a>;</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前端技术更新太快，自己几年未长进，惭愧… &lt;/p&gt;
&lt;h2 id=&quot;now-start&quot;&gt;&lt;a href=&quot;#now-start&quot; class=&quot;headerlink&quot; title=&quot;now start!!&quot;&gt;&lt;/a&gt;now start!!&lt;/h2&gt;&lt;p&gt;nodejs太重要
    
    </summary>
    
    
      <category term="nodejs" scheme="https://kuanglijun312.github.io/tags/nodejs/"/>
    
      <category term="express" scheme="https://kuanglijun312.github.io/tags/express/"/>
    
      <category term="react" scheme="https://kuanglijun312.github.io/tags/react/"/>
    
      <category term="webpack" scheme="https://kuanglijun312.github.io/tags/webpack/"/>
    
      <category term="stylus" scheme="https://kuanglijun312.github.io/tags/stylus/"/>
    
  </entry>
  
  <entry>
    <title>browserify使用</title>
    <link href="https://kuanglijun312.github.io/2016/04/05/browserify/"/>
    <id>https://kuanglijun312.github.io/2016/04/05/browserify/</id>
    <published>2016-04-05T12:19:54.000Z</published>
    <updated>2016-09-02T03:12:56.184Z</updated>
    
    <content type="html"><![CDATA[<p>前段js代码管理模块化，出了commonjs规范，个人对比了下AMD,CMD,觉得</p>
<h3 id="browerify安装"><a href="#browerify安装" class="headerlink" title="browerify安装"></a>browerify安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install browerify -g</div></pre></td></tr></table></figure>
<h3 id="主要打包"><a href="#主要打包" class="headerlink" title="主要打包"></a>主要打包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bowserify app.js&gt;bundle.js</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前段js代码管理模块化，出了commonjs规范，个人对比了下AMD,CMD,觉得&lt;/p&gt;
&lt;h3 id=&quot;browerify安装&quot;&gt;&lt;a href=&quot;#browerify安装&quot; class=&quot;headerlink&quot; title=&quot;browerify安装&quot;&gt;&lt;/a&gt;brow
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>gulp使用</title>
    <link href="https://kuanglijun312.github.io/2016/04/05/gulp/"/>
    <id>https://kuanglijun312.github.io/2016/04/05/gulp/</id>
    <published>2016-04-05T09:10:03.000Z</published>
    <updated>2016-09-02T03:12:56.185Z</updated>
    
    <content type="html"><![CDATA[<p>前段工具–gulp(ps,如果不懂nodejs，赶紧学吧…)<br>gulp插件地址: <a href="http://gulpjs.com/plugins/" target="_blank" rel="external">http://gulpjs.com/plugins/</a></p>
<h3 id="安装和使用"><a href="#安装和使用" class="headerlink" title="安装和使用"></a>安装和使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[sudo] npm install gulp -g</div><div class="line"><span class="built_in">cd</span> somedir</div><div class="line">npm install —-save-dev gulp</div><div class="line">vi gulpfile.js</div></pre></td></tr></table></figure>
<p>插件使用： 去 <a href="http://gulpjs.com/plugins/" target="_blank" rel="external">http://gulpjs.com/plugins/</a> 查找需要的plugin, 使用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp-someplugin --save-dev</div></pre></td></tr></table></figure></p>
<p>安装到本地</p>
<p>gulpfile.js示例代码: (相关plugin的使用请各自查看官方plugin的介绍)</p>
<a id="more"></a>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"># dir下的js文件中有hello.js,world.js,对应打包文件夹dist</div><div class="line"></div><div class="line">// 引入 gulp</div><div class="line">var gulp = require('gulp'); </div><div class="line"></div><div class="line">// 引入组件</div><div class="line">var jshint = require('gulp-jshint');</div><div class="line">var uglify = require('gulp-uglify');</div><div class="line">var concat = require('gulp-concat');</div><div class="line">var rename = require('gulp-rename');</div><div class="line"></div><div class="line">// 检查脚本</div><div class="line">gulp.task('lint', function() &#123;</div><div class="line">    gulp.src('./js/*.js')</div><div class="line">        .pipe(jshint())</div><div class="line">        .pipe(jshint.reporter('default'));</div><div class="line">&#125;);</div><div class="line"></div><div class="line"></div><div class="line">// 合并，压缩文件</div><div class="line">gulp.task('scripts', function() &#123;</div><div class="line">    gulp.src('./js/*.js')</div><div class="line">        .pipe(concat('all.js'))</div><div class="line">        .pipe(gulp.dest('./dist'))</div><div class="line">        .pipe(rename('all.min.js'))</div><div class="line">        .pipe(uglify())</div><div class="line">        .pipe(gulp.dest('./dist'));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 默认任务</div><div class="line">gulp.task('default', function()&#123;</div><div class="line">    gulp.start('lint', 'scripts');</div><div class="line"></div><div class="line">    gulp.watch('./js/*.js',['lint','scripts']);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>终端运行 <code>gulp</code>即可；</p>
<p>gulp的强大，使用中自己体会吧…</p>
<p>参考： <a href="https://markpop.github.io/2014/09/17/Gulp%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" target="_blank" rel="external">Gulp入门教程</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前段工具–gulp(ps,如果不懂nodejs，赶紧学吧…)&lt;br&gt;gulp插件地址: &lt;a href=&quot;http://gulpjs.com/plugins/&quot;&gt;http://gulpjs.com/plugins/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;安装和使用&quot;&gt;&lt;a href=&quot;#安装和使用&quot; class=&quot;headerlink&quot; title=&quot;安装和使用&quot;&gt;&lt;/a&gt;安装和使用&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;[sudo] npm install gulp -g&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; somedir&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;npm install —-save-dev gulp&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;vi gulpfile.js&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;插件使用： 去 &lt;a href=&quot;http://gulpjs.com/plugins/&quot;&gt;http://gulpjs.com/plugins/&lt;/a&gt; 查找需要的plugin, 使用&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;npm install gulp-someplugin --save-dev&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;安装到本地&lt;/p&gt;
&lt;p&gt;gulpfile.js示例代码: (相关plugin的使用请各自查看官方plugin的介绍)&lt;/p&gt;
    
    </summary>
    
    
      <category term="tool" scheme="https://kuanglijun312.github.io/tags/tool/"/>
    
      <category term="js" scheme="https://kuanglijun312.github.io/tags/js/"/>
    
      <category term="gulp" scheme="https://kuanglijun312.github.io/tags/gulp/"/>
    
      <category term="nodejs" scheme="https://kuanglijun312.github.io/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>xcode pods ld worning</title>
    <link href="https://kuanglijun312.github.io/2015/10/30/xcode-pods-ld-worning/"/>
    <id>https://kuanglijun312.github.io/2015/10/30/xcode-pods-ld-worning/</id>
    <published>2015-10-30T02:35:20.000Z</published>
    <updated>2016-09-02T03:12:56.187Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ld-worning"><a href="#ld-worning" class="headerlink" title="ld,worning"></a>ld,worning</h3><p>在building setting中，查看 Fragmework Search Paths 或者 Library Search Paths,，把警告的去掉:</p>
<p><img src="/img/xcode/xcode-1.png" alt="xcode-1.png"></p>
<h3 id="出现-ld-warning-directory-not-found-for-option-Pods-build-Debug-iphoneos"><a href="#出现-ld-warning-directory-not-found-for-option-Pods-build-Debug-iphoneos" class="headerlink" title="出现 ld: warning: directory not found for option Pods/build/Debug-iphoneos"></a>出现 ld: warning: directory not found for option Pods/build/Debug-iphoneos</h3><p>使用pod install命令出现以下：</p>
<p><img src="/img/xcode/xcode-2.png" alt="xcode-2.png"></p>
<p>请在 Build Setting -&gt; Other Linker Flags中添加 $(inherited)</p>
<p><img src="/img/xcode/xcode-3.png" alt="xcode-3.png"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ld-worning&quot;&gt;&lt;a href=&quot;#ld-worning&quot; class=&quot;headerlink&quot; title=&quot;ld,worning&quot;&gt;&lt;/a&gt;ld,worning&lt;/h3&gt;&lt;p&gt;在building setting中，查看 Fragmework Searc
    
    </summary>
    
    
      <category term="ios" scheme="https://kuanglijun312.github.io/tags/ios/"/>
    
      <category term="xcode" scheme="https://kuanglijun312.github.io/tags/xcode/"/>
    
  </entry>
  
  <entry>
    <title>git-tips</title>
    <link href="https://kuanglijun312.github.io/2015/10/28/git-tips/"/>
    <id>https://kuanglijun312.github.io/2015/10/28/git-tips/</id>
    <published>2015-10-28T09:48:19.000Z</published>
    <updated>2016-09-02T03:12:56.185Z</updated>
    
    <content type="html"><![CDATA[<p>#windows git _netrc</p>
<p><a href="http://stackoverflow.com/questions/6031214/git-how-to-use-netrc-file-on-windows-to-save-user-and-password" target="_blank" rel="external">Git - How to use .netrc file on windows to save user and password</a></p>
<p>在windows的高级设置里，设置用户的环境，添加 HOME;</p>
<p>或者在终端:</p>
<pre><code>@if not exist &quot;%HOME%&quot; @set HOME=%HOMEDRIVE%%HOMEPATH%
@if not exist &quot;%HOME%&quot; @set HOME=%USERPROFILE%
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;#windows git _netrc&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/6031214/git-how-to-use-netrc-file-on-windows-to-save-user-and-pass
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>zmmessageview</title>
    <link href="https://kuanglijun312.github.io/2015/10/21/zmmessageview/"/>
    <id>https://kuanglijun312.github.io/2015/10/21/zmmessageview/</id>
    <published>2015-10-21T01:51:48.000Z</published>
    <updated>2016-09-02T03:12:56.187Z</updated>
    
    <content type="html"><![CDATA[<p>a simple message warning(top toast);<a href="https://github.com/kuanglijun312/ZMMessageView" target="_blank" rel="external">demo</a></p>
<p>思路很简单；在最顶层的window添加一个包含uilabelview的uiview而已；在ios中任何view都可以addsubview–window也是view；<br><a id="more"></a></p>
<p>一个简单的message提示. 如图:<br><img src="https://raw.githubusercontent.com/kuanglijun312/ZMMessageView/master/screenshot/message-01.png" alt="message"> </p>
<p>部分代码:</p>
<p>寻找最顶层window:</p>
<pre><code>var applicationKeyWindow:UIWindow! = nil
    let frontToBackWindows = UIApplication.sharedApplication().windows.reverse()
    for window in frontToBackWindows {
        if window.windowLevel == UIWindowLevelNormal {
            applicationKeyWindow = window;
            break
        }
    }
</code></pre><p>清除动画: </p>
<pre><code>ZMMessageView.sharedInstance.layer.removeAllAnimations()
</code></pre><p>延迟执行:</p>
<pre><code>let delay = 2 * Double(NSEC_PER_SEC)
let time = dispatch_time(DISPATCH_TIME_NOW, Int64(delay))
dispatch_after(time, dispatch_get_main_queue()) {
    ZMMessageView.dismiss()
}
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;a simple message warning(top toast);&lt;a href=&quot;https://github.com/kuanglijun312/ZMMessageView&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;思路很简单；在最顶层的window添加一个包含uilabelview的uiview而已；在ios中任何view都可以addsubview–window也是view；&lt;br&gt;
    
    </summary>
    
    
      <category term="ios" scheme="https://kuanglijun312.github.io/tags/ios/"/>
    
      <category term="messageview" scheme="https://kuanglijun312.github.io/tags/messageview/"/>
    
  </entry>
  
</feed>
